<div class="container">
    <app-collaborative-doc-group-post-comment
    [post]="post"
    [user_data]="user_data"
    [user]="user"
    (newCommentReceived)="commentReceived($event)">
    </app-collaborative-doc-group-post-comment> 
</div>  

<div class="container" style="margin-top: 250px;">
    <button class="btn btn-primary" style="margin-bottom: 10px; margin-left: 50%" *ngIf="!toggle_comments && comments_count > 0" (click)="getComments(); toggle_comments = !toggle_comments">Show all {{comments_count}} Comment(s)</button>
    <button class="btn btn-dark btn-sm" style="margin-bottom: 10px; margin-left: 50%" *ngIf="toggle_comments && comments_count > 0" (click)="deselectAllTheComments(comments); toggle_comments = !toggle_comments">Hide Comments</button>
    
    
    <div *ngIf="toggle_comments">
        <section class="comments" *ngFor="let comment of comments">
            <div class="comment-contents">
                <div class="thumbnail cf">        
                    <img src="/uploads/{{comment?._commented_by?.profile_pic}}" 
                    onerror="this.src='/assets/images/user.png'"
                    class="feed-avatar" style="margin:5px auto"
                    [routerLink]="['/dashboard/profile', post?._posted_by?._id, 'profile']"/>
                </div>

             <h2 style="margin:1rem 1rem 1rem 1rem; color: black;">   {{ comment?._commented_by?.first_name }} {{ comment?._commented_by?.last_name }}</h2>
             <p (click)="selectHighlightedText(comment?._highlighted_content_range)" style="color: black; cursor: pointer;">{{ comment?.content }}</p>
              <div class="comment-infos">
                <div class="comment-date">
                  {{ comment?.created_date | date:'mediumDate' }}
                  
                  <!--<span class="likes-counter">
                    <a href="#">12 Likes</a>
                  </span>-->
                </div>
                <div class="comment-reply">
                  <button class="btn btn-sm btn-dark" *ngIf="user?.role == 'admin' || comment?._commented_by?._id == user?._id " (click)="deleteComment(comment?._id)">Delete</button>
                </div>
              </div>
            </div>
          </section>  
    </div>
    <button class="btn btn-primary btn-sm" style="margin-bottom: 10px; margin-left: 50%" *ngIf="toggle_comments && comments_count > 5 && nextCommentCount > 0" (click)="loadPreviousComments()">Show Next {{nextCommentCount}} Comments</button>

</div>
