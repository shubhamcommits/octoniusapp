<div class="container">
    <app-overview-page-header></app-overview-page-header>
    <div *ngIf="posts.length == 0">
        <img src='../../../assets/images/overview-emptystate.svg' style=" margin: 0 auto">
    </div>
    <div *ngIf="posts.length > 0 && (this.event_count == 0 && this.normal_count == 0 && this.task_count == 0)">
            <img src='../../../assets/images/overview-emptystate.svg' style=" margin: 0 auto">
        </div>
    <div *ngIf="posts.length > 0">
        <div  *ngIf="this.event_count == 1; else postif">
                <h5 class="title-overview">Upcoming events</h5>
        </div>         
   
    <ng-template #postif></ng-template>
    <div *ngFor="let post of posts; let i = index;">
            <a style="text-decoration:none; color:inherit;" href="/#/dashboard/group/{{post._group?._id}}/activity">
                <div *ngIf="post.type== 'event' && post.completed == false">
                   
                    <div class="media card-tile overview-event">
                        <!-- <img src="/uploads/{{post._group?.group_avatar}}" onerror="this.src='/assets/images/group.png'" class="mr-3 feed-avatar-big"> -->
                    <div class=" row media-body">
                        <div class="col-md-1">
                            <img src="/uploads/{{post._posted_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'"  class="feed-avatar">
                        </div>
                      <div class="col-md-2">
                          <h5>{{post._posted_by?.first_name}} </h5>
                        
                          <p class="small text-muted">{{post.created_date | date:'shortTime' }}</p>
                      </div>
                    <div class="col-md-8">
                        <!-- <p class="blue">New event in <b>{{post._group?.group_name}} group</b></p> -->
                        <div class="row event-title" style="margin-left:0px">
                            <div class="col-md-2 dateblock">
                              <span class="bigdate">{{post?.event.due_to | date :'dd' }}</span>
                              <br>
                              <span class="time">{{post?.event.due_to | date: 'MMMM' }}</span>
                              <br>
                              <span class="time"> {{post?.event.due_to | date: 'hh:mm'}}</span>
                            </div>
                            <div class="col-md-8 event-title">
                              <p class="blue">New event in <b>{{post._group?.group_name}} group</b></p>
                              <div [innerHTML]="post?.content | safe: 'html' "> </div>
                             
                            </div>
                            </div>
              
                    </div>
                    <div class="col-md-1">
                     
                      <p class="small text-muted"> <i class="material-icons blue">today</i><br />{{post.created_date | date:'MMM d' }}</p>
                    </div>
                    </div>
                    </div>
                    <!--<div *ngFor="let comment of post.comments">
                            <div class="media card-tile">
                               
                            <div class=" row media-body">
                                <div class="col-md-1">
                                    <img src="/uploads/{{comment._commented_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'" class="feed-avatar">
                                </div>
                              <div class="col-md-2">
                                <h5>{{comment._commented_by?.first_name}}</h5>
                                
                                <p class="small text-muted">{{comment.created_date | date:'shortTime' }}</p>
                               
                              </div>
                    
                              <div class="col-md-8">
                                  <p class="blue">Replied in <b>{{post._group?.group_name}} group</b> to the Event assigned to you</p>
                                  <div class="" [innerHTML]="comment.content"></div>
                              </div>
                             
                              <div class="col-md-1">
                              
                                <p class="small text-muted">  <i class="material-icons">chat</i><br> {{comment.created_date | date:'MMM d' }}</p>
                      
                              </div>
                              
                             </div>
                    
                        
                            </div>
                          </div>-->
                </div>
            </a>
            </div>

            <div  *ngIf="this.task_count == 1; else postif">
                    <h5 class="title-overview">Upcoming tasks</h5>
            </div>  
            
   
            <div *ngFor="let post of posts; let i = index;">
      <a style="text-decoration:none; color:inherit;" href="/#/dashboard/group/{{post._group?._id}}/activity">
          <div *ngIf="post.type== 'task' && post.completed == false">
          <div class="media card-tile overview-task">
              
          <div class=" row media-body">
              <div class="col-md-1">
                  <img src="/uploads/{{post._posted_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'"  class="feed-avatar">
              </div>
            <div class="col-md-2">
                <h5>{{post._posted_by?.first_name}} </h5>
              
                <p class="small text-muted">{{post?.created_date | date:'shortTime' }}</p>
               
            </div>
            <div class="col-md-8">
                <p class="pink">Assigned a task to you in <b>{{post._group?.group_name}} group</b> for <b>{{post.task.due_to | date:'d MMMM' }}</b></p>
                <div [innerHTML]="post.content"></div>
            </div>
           
            <div class="col-md-1">
              
              <p class="small text-muted"><i class="material-icons pink">check_box</i><br />{{post.created_date | date:'MMM d' }}</p>
    
            </div>
            
           </div>
      
          </div>
          <!--<div *ngFor="let comment of post.comments">
                  <div class="media card-tile">
                     
                  <div class=" row media-body">
                      <div class="col-md-1">
                          <img src="/uploads/{{comment._commented_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'" class="feed-avatar">
                      </div>
                    <div class="col-md-2">
                      <h5>{{comment._commented_by?.first_name}}</h5>
                      
                      <p class="small text-muted">{{comment.created_date | date:'shortTime' }}</p>
                     
                    </div>
          
                    <div class="col-md-8">
                        <p class="blue">Replied in <b>{{post._group?.group_name}} group</b> to the task assigned to you.</p>
                        <div class="" [innerHTML]="comment.content"></div>
                    </div>
                   
                    <div class="col-md-1">
                    
                      <p class="small text-muted">  <i class="material-icons">chat</i><br> {{comment.created_date | date:'MMM d' }}</p>
            
                    </div>
                    
                   </div>
          
              
                  </div>
                </div>-->
      </div>
      </a>
      </div>
      <div  *ngIf="this.normal_count == 1; else postif">
            <h5 class="title-overview">Recent interactions</h5>
    </div>  

    <div  *ngIf="this.event_count == 1 && (this.normal_count == 0 || this.task_count == 0); else postif">
            <h5 class="title-overview">Recent interactions</h5>
    </div>  
    <div  *ngIf="this.task_count == 1 && (this.event_count == 0 || this.task_count == 0) ;else postif">
            <h5 class="title-overview">Recent interactions</h5>
    </div>  
     
    
   <div *ngFor="let post of posts; let i = index;">

  <a style="text-decoration:none; color:inherit;" href="/#/dashboard/group/{{post._group?._id}}/activity">
    <div *ngIf="post.type== 'normal'">
       
      <div *ngFor="let comment of post.comments" >
        <div class="media card-tile overview-post">
            <!-- <img src="/uploads/{{post._group?.group_avatar}}" onerror="this.src='/assets/images/group.png'" class="mr-3 feed-avatar-big"> -->
        <div class=" row media-body">
            <div class="col-md-1">
                <img src="/uploads/{{comment._commented_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'" class="feed-avatar">
            </div>
          <div class="col-md-2">
            <h5>{{comment._commented_by?.first_name}}</h5>
            
            <p class="small text-muted">{{comment.created_date | date:'shortTime' }}</p>
           
          </div>
          <div class="col-md-8">
              <p class="blue">Replied in <b>{{post._group?.group_name}} group</b></p>
              <div class="" [innerHTML]="comment.content"></div>
          </div>
         
          <div class="col-md-1">
          
            <p class="small text-muted">  <i class="material-icons">chat</i><br> {{comment.created_date | date:'MMM d' }}</p>
  
          </div>
          
         </div>
    
        </div>
      </div>
    </div>
    </a>
    <div *ngIf="post.type== 'task' && post.completed == false && post.comments_count > 0">
    <div *ngFor="let comment of post.comments">
            <div class="media card-tile">
                <!-- <img src="/uploads/{{post._group?.group_avatar}}" onerror="this.src='/assets/images/group.png'" class="mr-3 feed-avatar-big"> -->
            <div class=" row media-body">
                <div class="col-md-1">
                    <img src="/uploads/{{comment._commented_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'" class="feed-avatar">
                </div>
              <div class="col-md-2">
                <h5>{{comment._commented_by?.first_name}}</h5>
                
                <p class="small text-muted">{{comment.created_date | date:'shortTime' }}</p>
               
              </div>
    
              <div class="col-md-8">
                  <p class="blue">Replied in <b>{{post._group?.group_name}} group</b> to the task assigned to you.</p>
                  <div class="" [innerHTML]="comment.content"></div>
              </div>
             
              <div class="col-md-1">
              
                <p class="small text-muted">  <i class="material-icons">chat</i><br> {{comment.created_date | date:'MMM d' }}</p>
      
              </div>
              
             </div>
    
        
            </div>
          </div>
          </div>
          <div *ngIf="post.type== 'event' && post.completed == false && post.comments_count > 0">
          <div *ngFor="let comment of post.comments">
                <div class="media card-tile">
                    <!-- <img src="/uploads/{{post._group?.group_avatar}}" onerror="this.src='/assets/images/group.png'" class="mr-3 feed-avatar"> -->
                <div class=" row media-body">
                    <div class="col-md-1">
                        <img src="/uploads/{{comment._commented_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'" class="feed-avatar">
                    </div>
                  <div class="col-md-2">
                    <h5>{{comment._commented_by?.first_name}}</h5>
                    
                    <p class="small text-muted">{{comment.created_date | date:'shortTime' }}</p>
                   
                  </div>
        
                  <div class="col-md-8">
                      <p class="blue">Replied in <b>{{post._group?.group_name}} group</b> to the Event assigned to you</p>
                      <div class="" [innerHTML]="comment.content"></div>
                  </div>
                 
                  <div class="col-md-1">
                  
                    <p class="small text-muted">  <i class="material-icons">chat</i><br> {{comment.created_date | date:'MMM d' }}</p>
          
                  </div>
                  
                 </div>
        
            
                </div>
              </div>
              </div>
   
  </div>
  </div>
  </div>
  