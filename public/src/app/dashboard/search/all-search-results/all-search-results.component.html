<div class="row" style="margin-top:120px">

  <div class="col-md-4">
    <div class="row sidecontent">
      <div class="card sideinnercard">
        <h6 class="card-title">Filters</h6>
        <hr>
        <ul class="filterlist">
          <li [class.active-filter]="filter === 'all'" (click)="changeFilter('all')" class="filter__list-item">
            <i class="material-icons">check_circle_outline</i> Everything
          </li>
          <li [class.active-filter]="filter === 'users'" (click)="changeFilter('users')">
            <i class="material-icons">person</i> Users
          </li>
          <li [class.active-filter]="filter === 'posts'" (click)="changeFilter('posts')">
            <i class="material-icons">chat</i> Posts
          </li>
          <li [class.active-filter]="filter === 'skills'" (click)="changeFilter('skills')">
            <i class="material-icons">local_offer</i> Skills
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="col-md-8">
   <div class="input-container">
              <h4>Search results for : {{search_value}}</h4>
              <input (keyup)="getSearchResults()" type="text" class="form-control form-control-lg" [(ngModel)]="search_value">
            </div>


    <div>
      <div *ngIf="search_results_posts?.length > 0">
        <ul class="list-group">
          <li class="list-group-item fade-in" *ngFor="let post of search_results_posts; let i = index;">
            <ng-container *ngIf="post?._id">
              <div class="card" id="postId-{{i}}">
                <div class="card-block ">
                  <div class="card-title ">
                    <img class="feed-avatar float-left" src="/uploads/{{post?._posted_by?.profile_pic}}"
                         onerror="this.src='/assets/images/user.png'">
                    <h6 [routerLink]="['/dashboard/profile', post?._posted_by?._id, 'profile']" class="link">
                      {{ post?._posted_by?.first_name }} {{ post?._posted_by?.last_name }} <br>
                      <span class="small lightgray date">Posted on
                      {{ post?.created_date | amDateFormat:'MM.DD.YYYY'}}</span></h6>
                  </div>
                  <div class="card-body">

                      <div class="col-md-12 innercard font-weight-bold" [innerHTML]="post?.title | safe: 'html'">
                        </div>
                    <div class="innercard" [innerHTML]="post?.content | safe: 'html'"></div>
                  </div>
                  <div class="row innercard" *ngIf="post?.tags?.length > 0">
                      <div class="col-md-12">
                         <span> <i class="material-icons tagslabel" placement="bottom" ngbTooltip="Tags">
                            local_offer
                            </i></span>
                          <span class="tagsbtn" style="margin-right: 0.5rem;" *ngFor="let tag of post?.tags; let i = index">{{tag}}</span>
                          </div>
                    </div>
                  <div class="card-footer">
                    <hr>
                    <span *ngIf="post?.type != 'document'" [routerLink]="['/dashboard/group', post?._group._id, 'post', post?._id]" 
                    class="link"
                    ngbTooltip="View Post">See
                    result</span>

                    <span *ngIf="post?.type == 'document'" [routerLink]="['/dashboard/group', post?._group._id, 'document', post?._id]" 
                    class="link"
                    ngbTooltip="View Document">See
                    result</span>
                    <span class="text-right padding-topright" style="float: right; object-fit: cover;">
                        <label class="btn btn-sm kbn-done" style=" color: white; background: #005FD5">Post Matching (Title, Content, or Tags)</label>
                    </span>
                  </div>

                </div>
              </div>
            </ng-container>
          </li>
        </ul>
        <span *ngIf="more_to_load_posts" (click)="loadMoreResults('posts', search_results_posts?.length)"
          class="load-more">Load more posts...</span>
      </div>
      <div *ngIf="search_results_users?.length > 0">
        <ul class="list-group">
          <li class="list-group-item fade-in" *ngFor="let user of search_results_users">
            <div class="card">
              <div class="card-block ">
                <div class="card-title ">
                  <img class="feed-avatar float-left" src="/uploads/{{user?.profile_pic}}"
                    onerror="this.src='/assets/images/user.png'">
                  <h6 [routerLink]="['/dashboard/profile', user?._id, 'profile']" class="link">{{ user?.first_name }} {{ user?.last_name }}</h6>
                </div>

                <div class="card-body clearfix">
                  <div class="innercard">

                    <span><b>Email:</b><a href="mailto:{{user?.email}}" target="_blank"> {{ user?.email }}</a> <br>
                      <b>Member since:</b> {{ user?.created_date | amDateFormat:'MM.DD.YYYY' }} <br> <br></span>
                      <span><b>Skills:</b></span>
                      <li class="tags" *ngFor="let skill of user?.skills; let i = index">{{skill}} 
                        </li>
                       
                  </div>
                </div>
                <div class="card-footer">
                  <hr>
                  <span [routerLink]="['/dashboard/profile', user?._id, 'profile']" placement="top"
                    ngbTooltip="Visit user profile" class="link">See profile</span>
                    <span class="text-right padding-topright" style="float: right; object-fit: cover;">
                        <label class="btn btn-sm kbn-done" style=" color: white; background: #005FD5">User Matching with Name</label>
                    </span>
                  </div>
              </div>
            </div>

          </li>
        </ul>
        <span *ngIf="more_to_load_users" (click)="loadMoreResults('users', search_results_users?.length)"
          class="load-more">Load more users...</span>
      </div>
      <div *ngIf="search_results_skills?.length > 0">

        <ul class="list-group">
          <li class="list-group-item fade-in" *ngFor="let user of search_results_skills">
            <div class="card">
              <div class="card-block ">
                <div class="card-title ">

                  <img class="feed-avatar float-left" src="/uploads/{{user?.profile_pic}}"
                    onerror="this.src='/assets/images/user.png'">
                  <h6 [routerLink]="['/dashboard/profile', user?._id, 'profile']" class="link">{{ user?.first_name }} {{ user?.last_name }}</h6>
                </div>
                <div class="card-body clearfix">
                  <div class="innercard">
                      <span><b>Email:</b> <a href="mailto:{{user?.email}}" target="_blank">{{ user?.email }}</a> <br>
                        <b>Member since:</b> {{ user?.created_date | amDateFormat:'MM.DD.YYYY' }}<br> <br></span>
                        <span><b>Skills:</b></span>
                        <li class="tags" *ngFor="let skill of user?.skills; let i = index">{{skill}} 
                          </li>
                  </div>
                </div>
              </div>

            <div class="card-footer">
              <hr>
              <span [routerLink]="['/dashboard/profile', user?._id, 'profile']" placement="top"
                ngbTooltip="View profile with matching skills" class="link">See profile</span>
                <span class="text-right padding-topright" style="float: right; object-fit: cover;">
                    <label class="btn btn-sm kbn-done" style=" color: white; background: #005FD5">User Matching with Skills</label>
                </span>
              </div>
              </div>

          </li>


        </ul>
        <span *ngIf="more_to_load_skills" (click)="loadMoreResults('skills', search_results_skills?.length)"
          class="load-more">Load more skills...</span>
      </div>
    </div>

  </div>

</div>
