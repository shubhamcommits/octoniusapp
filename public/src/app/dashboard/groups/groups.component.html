
  <div class="container">
  <app-groups-page-header></app-groups-page-header>



  <div *ngIf="alert.message" [ngClass]="alert.class">{{alert.message}}</div>
  <div class="row no-margin">
      <div *ngIf="user?.role== 'admin' || user?.role== 'owner'" (click)="openLg(content)" class="card col-md-3 overlay" style="text-align:center; background-image:url(https://picsum.photos/600/300/?random&gravity=south ) !important; cursor: pointer;">
        <!-- <img class="card-img-top" src="https://picsum.photos/1920/1200/?random&gravity=south">  -->
        <div class="card-body content" style="background:transparent">
         
              <h2 class="card-title white" style="color: #fff; margin-top: 60px;">  <i class="material-icons">group</i> <br> Create New Group</h2>
          
          <!-- <p class="card-text">Group description</p>  -->
        </div>
      </div>
      <div (click)="openAgoraModal(agora)" class="card col-md-3 overlay" style="text-align:center; background-image:url(https://picsum.photos/600/300/?random&gravity=north ) !important; cursor: pointer;">
        <!-- <img class="card-img-top" src="https://picsum.photos/1920/1200/?random&gravity=south">  -->
        <div class="card-body content" style="background:transparent">
         
          <h2 class="card-title white" style="color: #fff; margin-top: 60px;">  <i class="material-icons">account_balance</i> <br> Create Agora</h2>
          
          <!-- <p class="card-text">Group description</p>  -->
        </div>
      </div>

    <!-- <div *ngIf="user?.role== 'admin' || user?.role== 'owner'" (click)="openLg(content)" class="card col-md-3" style="cursor: pointer;">

        <a>

           <button class="btn btn-primary btn-block btn-lg"> <i class="material-icons" style="font-size: 3.5rem">add_circle_outline</i><br> New Group</button>

        </a>


    </div> -->

    <!--     <div class="card col-md-3 m-1" [routerLink]="['/dashboard/group/',group._id,'activity']">
      <img class="card-img-top " src="https://source.unsplash.com/random">
      <div class="card-body ">
        <a>
          <h4 class="card-title ">Global</h4>
        </a>
        <p class="card-text ">{{'This is Gloabl group'}}
          <br>
          <span class="badge badge-success ">{{workspace?.members.length}} Members</span>
          <span class="small ">including you</span>
        </p>
      </div>
    </div> -->
    <ng-container *ngFor="let group of groups " style="margin-bottom: 30px">
      <div *ngIf="group.group_name !== 'private'" class="card col-md-3 groups" [routerLink]="['/dashboard/group/',group._id,'activity']">
        <span class="badge badge-members" >{{group._members?.length + group._admins?.length}} Members</span>
        <img class="card-img-top" [src] = "group.group_avatar" onerror="this.src='/assets/images/group.png'" >
        <div class="card-body ">
          <a>
            <h2 class="card-title">{{group?.group_name}}</h2>
          </a>
          <!-- <p class="card-text">Group description</p>  -->
        </div>
      </div>
    </ng-container>

    <ng-template #content let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h4 class="modal-title">Create New Group</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <ngb-alert *ngIf="alert.message" [type]="alert.class" (close)="successMessage = null">{{ alert.message}}</ngb-alert>

      <div class="modal-body">
        <form [formGroup]="createNewGroupForm">

          <div class="form-group">
            <label for="group_name">Group Name</label>
            <input type="text" class="form-control" id="group_name" formControlName="groupName" [(ngModel)]="group.group_name" name="groupName">
          </div>
        </form>

      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-default" (click)="c('Close click')">Cancel</button>
        <button [disabled]="createNewGroupForm.invalid" class="btn btn-primary" (click)="onCreateNewGroup()">Create Group</button>
        
      </div>
    </ng-template>

    <ng-template #agora let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h4 class="modal-title">Create Agora</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <ngb-alert *ngIf="alert.message" [type]="alert.class" (close)="successMessage = null">{{ alert.message}}</ngb-alert>

      <div class="modal-body">
        <form [formGroup]="createNewGroupForm">

          <div class="form-group">
            <label for="group_name">Group Name</label>
            <input type="text" class="form-control" id="group_name" formControlName="groupName" [(ngModel)]="group.group_name" name="groupName">
          </div>
        </form>

      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-default" (click)="c('Close click')">Cancel</button>
        <button [disabled]="createNewGroupForm.invalid" class="btn btn-primary" (click)="onCreateAgora()">Create Agora</button>
        
      </div>
    </ng-template>
  </div>

  <div *ngIf="agoras.length > 0" class="row no-margin mt-3">
    <h5 class="w-100">Public Groups</h5>
  </div>

  <div class="row no-margin">
    <ng-container *ngFor="let agora of agoras">
      <div class="card col-md-3 groups" style="cursor: default !important">
        <span class="badge badge-members" >{{agora._members?.length + agora._admins?.length}} Members</span>
        <img class="card-img-top" [src] = "agora.group_avatar" onerror="this.src='/assets/images/group.png'" >
        <a class="btn btn-warning btn-join" (click)="joinPublicGroup(agora._id)">Join</a>
        <div class="card-body ">
          <a>
            <h2 class="card-title">{{agora?.group_name}}</h2>
          </a>
          <!-- <p class="card-text">Group description</p>  -->
        </div>
      </div>
    </ng-container>
  </div>


</div>
