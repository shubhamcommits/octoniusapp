<div class="dialog-content">
  <mat-dialog-actions align="end" style="float: right;">
    <div class="action-box">
      <a (click)="closeDialog()" style="cursor: pointer" mat-dialog-close>
        <i class="material-icons" style="cursor: pointer">close</i>
      </a>
    </div>
  </mat-dialog-actions>

  <mat-dialog-content>
    <div class="content">
      <!-- Empty State of tasks starts -->
      <div *ngIf="this.overdueAndTodayTasks.length == 0 && this.thisWeekTasks.length == 0">
        <img src='assets/images/placeholder_activity3.png' class="placeholder-img">
        <p class="muted text-center" i18n="@@portfolioUserWorkloadDialog.done">Done. That's a wrap! </p>
      </div>
      <!-- Empty State of tasks ends -->

      <h5 class="title-overview"
        *ngIf="this.overdueAndTodayTasks.length != 0"
        i18n="@@portfolioUserWorkloadDialog.today">
          Today
      </h5>

      <div *ngFor="let task of overdueAndTodayTasks; let i = index; trackBy: utilityService.trackByIndex">
          <!-- My Space Today Tasks -->
          <div>
            <div class="media card-tile overview-task todo-bar" *ngIf="task.task.status === 'to do'" role="progressbar">
              <div class="row media-body">
                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class=" grouplabel " [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

            <!-- task in progress -->

            <div class="media card-tile overview-task working-bar" *ngIf="task.task.status === 'in progress'"
              role="progressbar">
              <div class="row media-body">
                <div class="col-md-1"
                  *ngIf="task.task.status.trim() === 'completed' || task.task.status.trim() === 'done' ">
                  <div class="progress small-bar">
                    <div class="progress-bar done-bar" role="progressbar"></div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class=" grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

            <!-- done tasks -->

            <div class="media card-tile overview-task done-bar"
              *ngIf="task.task.status.trim() === 'completed' || task.task.status.trim() === 'done' " role="progressbar">
              <div class="row media-body">
                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

          </div>
      </div>

      <h5 class="title-overview" *ngIf="this.thisWeekTasks.length !=  0">This week</h5>

      <div *ngFor="let task of thisWeekTasks; let i = index; trackBy: utilityService.trackByIndex">
        
          <!-- My Space This week Tasks -->


          <div>
            <div class="media card-tile overview-task todo-bar" *ngIf="task.task.status === 'to do'" role="progressbar">
              <div class="row media-body">
                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

            <!-- task in progress -->

            <div class="media card-tile overview-task working-bar" *ngIf="task.task.status === 'in progress'"
              role="progressbar">
              <div class="row media-body">
                <div class="col-md-1"
                  *ngIf="task.task.status.trim() === 'completed' || task.task.status.trim() === 'done' ">
                  <div class="progress small-bar">
                    <div class="progress-bar done-bar" role="progressbar"></div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

            <!-- done tasks -->

            <div class="media card-tile overview-task done-bar"
              *ngIf="task.task.status.trim() === 'completed' || task.task.status.trim() === 'done' " role="progressbar">
              <div class="row media-body">
                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>
          </div>

        
      </div>

      <h5 class="title-overview" *ngIf="this.nextWeekTasks.length !=  0" i18n="@@portfolioUserWorkloadDialog.nextWeek">Next week</h5>

      <div *ngFor="let task of nextWeekTasks; let i = index; trackBy: utilityService.trackByIndex">
        
          <!-- My Space This week Tasks -->
          <div>
            <div class="media card-tile overview-task todo-bar" *ngIf="task.task.status === 'to do'" role="progressbar">
              <div class="row media-body">

                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

            <!-- task in progress -->

            <div class="media card-tile overview-task working-bar" *ngIf="task.task.status === 'in progress'"
              role="progressbar">
              <div class="row media-body">
                <div class="col-md-1"
                  *ngIf="task.task.status.trim() === 'completed' || task.task.status.trim() === 'done' ">
                  <div class="progress small-bar">
                    <div class="progress-bar done-bar" role="progressbar"></div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

            <!-- done tasks -->

            <div class="media card-tile overview-task done-bar"
              *ngIf="task.task.status.trim() === 'completed' || task.task.status.trim() === 'done' " role="progressbar">
              <div class="row media-body">
                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        
      </div>



      <h5 class="title-overview" *ngIf="this.futureTasks.length !=  0" i18n="@@portfolioUserWorkloadDialog.futureTasks">Future Tasks</h5>

      <div *ngFor="let task of futureTasks; let i = index; trackBy: utilityService.trackByIndex">
        
          <!-- My Space future Tasks -->


          <div>
            <div class="media card-tile overview-task todo-bar" *ngIf="task.task.status === 'to do'" role="progressbar">
              <div class="row media-body">
                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

            <!-- task in progress -->

            <div class="media card-tile overview-task working-bar" *ngIf="task.task.status === 'in progress'"
              role="progressbar">
              <div class="row media-body">
                <div class="col-md-1"
                  *ngIf="task.task.status.trim() === 'completed' || task.task.status.trim() === 'done' ">
                  <div class="progress small-bar">
                    <div class="progress-bar done-bar" role="progressbar"></div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>

              </div>
            </div>

            <!-- done tasks -->

            <div class="media card-tile overview-task done-bar"
              *ngIf="task.task.status.trim() === 'completed' || task.task.status.trim() === 'done' " role="progressbar">

              <div class="row media-body">
                <div class="col-md-6">
                  <div class="overview-item title-nowrap pl-0" [innerHTML]="task?.title"></div>
                </div>
                <div class="col-md-1" *ngIf="task?.task?.custom_fields && task?.task?.custom_fields['priority']">
                  <div [ngClass]="getPriorityClass(task?.task?.custom_fields['priority'])">
                    {{ task?.task?.custom_fields['priority'] }}
                  </div>
                </div>
                <div class="col-md-1" *ngIf="!task?.task?.custom_fields || !task?.task?.custom_fields['priority']">
                </div>
                <div class="col-md-3">
                  <div class="overview-item grouplabel" [innerHTML]="task?._group?.group_name"></div>
                </div>

                <div class="col-md-2">
                  <div *ngIf="task.overdue" class="overview-item small text-right overdue" i18n="@@portfolioUserWorkloadDialog.overdue">
                    OVERDUE
                  </div>
                  <div *ngIf="!task.overdue" class="overview-item small text-muted text-right">
                    {{ formateDate(task?.task?.due_to) }}
                  </div>
                </div>
              </div>
            </div>

          </div>

        
      </div>
    </div>
  </mat-dialog-content>
</div>

<!-- Loading Spinner Starts -->
<ng-container *ngIf="isLoading$ | async">
  <app-loading-spinner class="media"></app-loading-spinner>
</ng-container>
<!-- Loading Spinner Ends -->