<div class="board">
  <div class="board-wrapper">
    <div style="margin-top: 20px;width: 100%;">
      <div id="main_container" [attr.width]="gantt_container_width">
        <div class="vl" [ngStyle]="{'left':(current_date_index*step+15)+'px'}"></div>
        <p [attr.width]="step" class="first_month">{{dates[0]?.month}}</p>
        <div *ngFor="let item of dates; let i =index" [ngStyle]="{'left':(i*50)+'px','height':gantt_container_height,'background-color'
          : item.isweekend?'#fff':'initial'}" class="date_div">
          <p *ngIf="item.day == 1" [ngStyle]="{'top':'-30px'}" [attr.width]="step" class="first_month">{{item.month}}
          </p>
          <p [ngStyle]="{'color':item.day === 1 ? 'red':'initial'}" [ngClass]="i==current_date_index?'curretn_date':''" class="day">
            {{item.day}}</p>
        </div>
        <div *ngFor="let task of tasksdata; let i =index" 
        [ngStyle]="{'left':task.parent_due_index ? (task.parent_due_index*step+step)+'px':'0px','position':'absolute','top':(60*i+100)+'px',
        'board':'1px solid gray','width': task.parent_due_index ? ((dates.length-task.parent_due_index-1)*step)+'px':gantt_container_width}"
        cdkDropList class="example-list" (cdkDropListDropped)="drop($event)">
          <div [attr.taskIndex]="i" [attr.id]="task.id" [ngStyle]="{'left': task.parent_due_index ? ((task.index_date-task?.parent_due_index)*step-step)+'px':(task.index_date*step)+'px','top':'0px','width'
          :(task.difference*step+step)+'px'}" (click)="openFullscreenModal(task.task)" [ngClass]="
        task.custom_class == 'to do'? 'rectangle task_card status-todo' 
        : task.custom_class == 'in progress' ? 'rectangle task_card status-inprogress' 
        : task.custom_class == 'done' ? 'rectangle task_card status-done' : 'rectangle task_card status-todo'
      " cdkDragLockAxis="x" cdkDrag cdkDragBoundary=".example-list" mwlResizable [validateResize]="validate.bind(this)" [enableGhostResize]="true"
            (resizeEnd)="onResizeEnd($event,task.id,i)">
            <div class="resize-handle-left" [attr.id]="task.id+'l'" mwlResizeHandle [resizeEdges]="{ left: true }" (mouseover)="updatingx(i)"></div>
            <div class="resize-handle-right" [attr.id]="task.id+'r'" mwlResizeHandle [resizeEdges]="{ right: true }"></div>
            <div class="media">
              <app-assignee-avatar [post]="task.task" [userData]="userData"></app-assignee-avatar>
              <div class="media-body">
                <h5 *ngIf="task.difference>0" class="mt-2 task_title_text">{{task.difference===1 ? (task.name |
                truncatetext:2) : task.name | truncatetext:20}}</h5>
                <i class="material-icons-outlined ml-2 menu_icon" cdkDragHandle>more_vert</i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>