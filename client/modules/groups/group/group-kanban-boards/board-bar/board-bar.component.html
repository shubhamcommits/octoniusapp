<nav class="navbar fixed-top">

    <div class="rightside">

      <button *ngIf="viewType == 'kanban' || viewType == 'table'" class="btn badge-filters" [matMenuTriggerFor]="menuSort">

        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="badge-filters">
          <path d="M16.199 17.219v-7.01h-2v7.01h-3l4 3.99 4-3.99h-3zm-7-14.01l-4 3.99h3v7.01h2v-7.01h3l-4-3.99z"/>
        </svg>
        <span>Sort</span>
      </button>

      <span *ngIf="viewType == 'kanban' || viewType == 'table'" class="separator"></span>

      <button *ngIf="viewType == 'kanban' || viewType == 'table'" class="btn badge-filters" [matMenuTriggerFor]="menuFilter">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="badge-filters">
          <path d="M9.597 18.209h4v-2h-4v2zm-7-12v2h18v-2h-18zm3 7h12v-2h-12v2z"/>
        </svg>
        <span>Filter</span>
      </button>

      <span *ngIf="viewType == 'kanban' || viewType == 'table'" class="separator"></span>

      <button class="btn badge-cf" *ngIf="isAdmin" (click)="openCustomFieldsDialog()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="badge-cf">
          <path d="M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15zM11.5 9.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zm-1.51 3.49L9 15.17l-.99-2.18L5.83 12l2.18-.99L9 8.83l.99 2.18 2.18.99-2.18.99z"/>
        </svg>

        <span>Custom Fields</span>
      </button>

      <span class="separator" *ngIf="isAdmin"></span>

      <button class="btn badge-automator" *ngIf="isAdmin" (click)="openAutomatorDialog()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M2.4 13.5v-12h10l-4 9h4l-7 12v-9h-3zm14-12h2l3.2 9h-1.9l-.7-2h-3.2l-.7 2h-1.9l3.2-9zm1 2l-1.15 3.65h2.3L17.4 3.5zm-7.877 8.674l-2.339 4.061.835-4.06H4.671V3.5h4.05l-2.524 7.818h3.826l-.5.856z" clip-rule="evenodd"/>
        </svg>

        <span>Automator</span>
      </button>

      <span class="separator"></span>

      <button [matMenuTriggerFor]="menu" class="btn badge-boardviews">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
          <path d="M20 1.5H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-16c0-1.1-.9-2-2-2zm-12 18H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4v-4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4v-4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4v-4h4v4z"/>
        </svg>

        <span>Board Views</span>
      </button>

      <mat-menu #menu="matMenu">
        <a mat-menu-item (click)="changeView('kanban')" class="board-options">
          <img src="assets/images/Icon/board-bar/icon_kanban.svg" alt="" class="mr-2">

          <span>Kanban Board</span>
        </a>
        <a mat-menu-item (click)="changeView('table')" class="board-options">
          <img src="assets/images/Icon/board-bar/icon_table.svg" alt="" class="mr-2">

          <span>Table</span>
        </a>
        <a mat-menu-item (click)="changeView('calendar')" class="board-options">
          <img src="assets/images/Icon/board-bar/icon_calendar.svg" alt="" class="mr-2">

          <span>Calendar</span>
        </a>

        <a *ngIf="groupData.project_type" mat-menu-item (click)="changeView('gantt')" class="board-options">
          <img src="assets/images/Icon/board-bar/icon_timeline.svg" alt="" class="mr-2">
          <span>Timeline</span>
        </a>

      </mat-menu>

      <mat-menu #menuSort="matMenu">
        <a mat-menu-item (click)="sortTasks('none')" [ngStyle]="{'color' : (sortby==='none') ? 'green' : 'black'}">
          <span>None</span>
        </a>
        <a mat-menu-item (click)="sortTasks('due_date')"
          [ngStyle]="{'color' : (sortby==='due_date') ? 'green' : 'black'}">
          <span>Due Date</span>
        </a>
        <a mat-menu-item (click)="sortTasks('priority')"
          [ngStyle]="{'color' : (sortby==='priority') ? 'green' : 'black'}">
          <span>Priority</span>
        </a>

        <a mat-menu-item (click)="sortTasks('tags')" [ngStyle]="{'color' : (sortby==='tags') ? 'green' : 'black'}">
          <span>Tags</span>
        </a>

        <a mat-menu-item (click)="sortTasks('status')" [ngStyle]="{'color' : (sortby==='status') ? 'green' : 'black'}">
          <span>Status</span>
        </a>

        <a mat-menu-item (click)="sortTasks('ideas')" *ngIf="isIdeaModuleAvailable"
          [ngStyle]="{'color' : (sortby==='due_date') ? 'green' : 'black'}">
          <span>Ideas</span>
        </a>
      </mat-menu>

      <mat-menu #menuFilter="matMenu" style="overflow: visible !important;" class="filter-menu">
        <a mat-menu-item (click)="filterTask('none')" [ngStyle]="{'color' : (filterfor==='none') ? 'green' : 'black'}">
          <span>None</span>
        </a>
        <a mat-menu-item (click)="filterTask('mytask')"
          [ngStyle]="{'color' : (filterfor==='mytask') ? 'green' : 'black'}">
          <span>My Tasks</span>
        </a>
        <span mat-menu-item class="cursordefault overflowvisible"
          [ngStyle]="{'color' : (filterfor==='users') ? 'green' : 'black'}">
          <!-- <span >Users</span> -->
          <div (click)="$event.stopPropagation();">
            <app-member-list-menu [groupMembers]="groupMembers" [filterfor]="filterfor" [menuLable]="menuLable"
              [menuFor]="menuFor" (userSelctionEmitter)="onUserSelctionEmitter($event)">
            </app-member-list-menu>
          </div>

          <!-- <button mat-button [matMenuTriggerFor]="assigneeSearch" #trigger="matMenuTrigger" class="btn tagslabel">add assignee</button> -->
        </span>

        <span mat-menu-item class="cursordefault overflowvisible">

          <div (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()">
            <button [matMenuTriggerFor]="menuDueDate" class="dropdownbtn">
              <span [ngStyle]="{'cursor': 'pointer','color' : (filterfor==='due_before_today' ||
              filterfor==='due_today' ||
              filterfor==='due_tomorrow'||
              filterfor==='due_week' ||
              filterfor==='due_next_week' ||
              filterfor==='due_14_days') ? 'green' : 'black'}">Due Date</span>
              <span>
                <div class="label-priority low selectedPriority" *ngIf="(filterfor==='due_before_today' ||
                filterfor==='due_today' ||
                filterfor==='due_tomorrow'||
                filterfor==='due_week' ||
                filterfor==='due_next_week' ||
                filterfor==='due_14_days')">
                  {{
                  filterfor==='due_before_today'?"Before today":
                  filterfor==='due_today'?"Today":
                  filterfor==='due_tomorrow'?"Tomorrow":
                  filterfor==='due_week'?"This week":
                  filterfor==='due_next_week'?"Next week":
                  filterfor==='due_14_days'?"Next 14 days":""
                }}</div>
              </span>
            </button>
            <mat-menu #menuDueDate="matMenu">

              <a mat-menu-item (click)="filterTask('due_before_today')" style="margin: 10px;text-decoration: none;">
                <span>Before today</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_today')" style="margin: 10px;text-decoration: none;">
                <span>Today</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_tomorrow')" style="margin: 10px;text-decoration: none;">
                <span>Tomorrow</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_week')" style="margin: 10px;text-decoration: none;">
                <span>This week</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_next_week')" style="margin: 10px;text-decoration: none;">
                <span>Next week</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_14_days')" style="margin: 10px;text-decoration: none;">
                <span>Next 14 days</span>
              </a>

            </mat-menu>
          </div>
        </span>

        <span mat-menu-item class="cursordefault overflowvisible">
          <div (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()">
            <button [matMenuTriggerFor]="menuPriority" class="dropdownbtn">
              <span [ngStyle]="{'cursor': 'pointer','color' : (filterfor==='priority_high' ||
              filterfor==='priority_medium' ||
              filterfor==='priority_low') ? 'green' : 'black'}">Priority</span>

              <div class="label-priority high selectedPriority" *ngIf="filterfor==='priority_high'">High</div>
              <div class="label-priority medium selectedPriority" *ngIf="filterfor==='priority_medium'">Medium</div>
              <div class="label-priority low selectedPriority" *ngIf="filterfor==='priority_low'">Low</div>
            </button>

            <mat-menu #menuPriority="matMenu">
              <a mat-menu-item (click)="filterTask('priority_high')" style="margin: 10px;text-decoration: none;">
                <span>
                  <div class="label-priority high" (click)="filterTask('priority_high')">
                    High
                  </div>
                </span>
              </a>

              <a mat-menu-item (click)="filterTask('priority_medium')" style="margin: 10px;text-decoration: none;">
                <span>
                  <div class="label-priority medium" (click)="filterTask('priority_medium')">
                    Medium
                  </div>
                </span>
              </a>

              <a mat-menu-item (click)="filterTask('priority_low')" style="margin: 10px;text-decoration: none;">
                <span>
                  <div class="label-priority low" (click)="filterTask('priority_low')">
                    Low
                  </div>
                </span>
              </a>
            </mat-menu>
          </div>
        </span>

        <a mat-menu-item (click)="filterTask('ideas')" *ngIf="isIdeaModuleAvailable"
          [ngStyle]="{'color' : (filterfor==='ideas') ? 'green' : 'black'}">
          <span>Ideas</span>
        </a>
      </mat-menu>
    </div>
</nav>
