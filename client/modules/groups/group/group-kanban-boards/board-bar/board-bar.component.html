<nav class="navbar d-none d-sm-block">

    <div class="rightside">

      <button *ngIf="viewType == 'kanban' || viewType == 'table'" class="btn badge-filters" [matMenuTriggerFor]="menuSort">

        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="badge-filters">
          <path d="M16.199 17.219v-7.01h-2v7.01h-3l4 3.99 4-3.99h-3zm-7-14.01l-4 3.99h3v7.01h2v-7.01h3l-4-3.99z"/>
        </svg>
        <span i18n="@@groupBoardBar.sort">Sort</span>
      </button>

      <span *ngIf="viewType == 'kanban' || viewType == 'table'" class="separator"></span>

      <button *ngIf="viewType == 'kanban' || viewType == 'table'" class="btn badge-filters" [matMenuTriggerFor]="menuFilter">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="badge-filters">
          <path d="M9.597 18.209h4v-2h-4v2zm-7-12v2h18v-2h-18zm3 7h12v-2h-12v2z"/>
        </svg>
        <span i18n="@@groupBoardBar.filter">Filter</span>
      </button>

      <span *ngIf="viewType == 'kanban' || viewType == 'table'" class="separator"></span>

      <button class="btn badge-cf" *ngIf="isAdmin && viewType != 'archived'" (click)="openCustomFieldsDialog()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="badge-cf">
          <path d="M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15zM11.5 9.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zm-1.51 3.49L9 15.17l-.99-2.18L5.83 12l2.18-.99L9 8.83l.99 2.18 2.18.99-2.18.99z"/>
        </svg>

        <span i18n="@@groupBoardBar.customFields">Custom Fields</span>
      </button>

      <span class="separator" *ngIf="isAdmin && viewType != 'archived'"></span>

      <button class="btn badge-automator" *ngIf="isAdmin && viewType != 'archived'" (click)="openAutomatorDialog()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M2.4 13.5v-12h10l-4 9h4l-7 12v-9h-3zm14-12h2l3.2 9h-1.9l-.7-2h-3.2l-.7 2h-1.9l3.2-9zm1 2l-1.15 3.65h2.3L17.4 3.5zm-7.877 8.674l-2.339 4.061.835-4.06H4.671V3.5h4.05l-2.524 7.818h3.826l-.5.856z" clip-rule="evenodd"/>
        </svg>

        <span i18n="@@groupBoardBar.automator">Automator</span>
      </button>

      <span class="separator" *ngIf="viewType != 'archived'"></span>

      <button [matMenuTriggerFor]="menu" class="btn badge-boardviews">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
          <path d="M20 1.5H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-16c0-1.1-.9-2-2-2zm-12 18H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4v-4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4v-4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4v-4h4v4z"/>
        </svg>

        <span i18n="@@groupBoardBar.boardViews">Board Views</span>
      </button>

      <mat-menu #menu="matMenu">
        <a mat-menu-item *ngIf="viewType != 'kanban'" (click)="changeView('kanban')" class="board-options">
          <img src="assets/images/Icon/board-bar/icon_kanban.svg" alt="" class="mr-2">

          <span i18n="@@groupBoardBar.kanbanBoard">Kanban Board</span>
        </a>

        <a mat-menu-item *ngIf="viewType != 'table'" (click)="changeView('table')" class="board-options">
          <img src="assets/images/Icon/board-bar/icon_table.svg" alt="" class="mr-2">

          <span i18n="@@groupBoardBar.table">Table</span>
        </a>

        <a mat-menu-item *ngIf="viewType != 'calendar'" (click)="changeView('calendar')" class="board-options">
          <img src="assets/images/Icon/board-bar/icon_calendar.svg" alt="" class="mr-2">

          <span i18n="@@groupBoardBar.calendar">Calendar</span>
        </a>

        <a *ngIf="groupData.project_type && viewType != 'gant'" mat-menu-item (click)="changeView('gantt')" class="board-options">
          <img src="assets/images/Icon/board-bar/icon_timeline.svg" alt="" class="mr-2">
          <span i18n="@@groupBoardBar.timeline">Timeline</span>
        </a>

        <a mat-menu-item *ngIf="viewType != 'archived'" (click)="changeView('archived')" class="board-options">
          <span class="material-icons-outlined mr-2">archive</span>

          <span i18n="@@groupBoardBar.archived">Archived</span>
        </a>
      </mat-menu>

      <mat-menu #menuSort="matMenu" class="widepanel">
        <a mat-menu-item (click)="sortTasks('none')" [ngStyle]="{'color' : (sortby==='none') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.sort.none">None</span>
        </a>

        <a mat-menu-item (click)="sortTasks('due_date')"
          [ngStyle]="{'color' : (sortby==='due_date') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.sort.dueDate">Due Date</span>
        </a>

        <a mat-menu-item (click)="sortTasks('creation_date')"
          [ngStyle]="{'color' : (sortby==='creation_date') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.sort.creationDate">Creation Date</span>
        </a>

        <a mat-menu-item (click)="sortTasks('tags')" [ngStyle]="{'color' : (sortby==='tags') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.sort.tags">Tags</span>
        </a>

        <a mat-menu-item (click)="sortTasks('status')" [ngStyle]="{'color' : (sortby==='status') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.sort.status">Status</span>
        </a>

        <a mat-menu-item (click)="sortTasks('ideas')" *ngIf="isIdeaModuleAvailable"
          [ngStyle]="{'color' : (sortby==='ideas') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.sort.ideas">Ideas</span>
        </a>

        <a mat-menu-item [matMenuTriggerFor]="menuCustomFieldsSort" class="dropdownbtn widepanel"
          [ngStyle]="{'color' : (sortby==='priority') ? '#005fd5' : 'black'}">
            <span i18n="@@groupBoardBar.sort.customField">Custom Field</span>
        </a>

        <mat-menu #menuCustomFieldsSort="matMenu">
          <a mat-menu-item *ngFor="let cf of groupData?.custom_fields" (click)="sortTasks('custom_field', cf)" style="margin: 10px;text-decoration: none;">
            <span>{{ cf.title }}</span>
          </a>
        </mat-menu>
      </mat-menu>

      <mat-menu #menuFilter="matMenu" style="overflow: visible !important;" class="filter-menu widepanel">
        <a mat-menu-item (click)="filterTask('none')" [ngStyle]="{'color' : (filterfor==='none') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.filter.none">None</span>
        </a>

        <a mat-menu-item (click)="filterTask('mytask')"
          [ngStyle]="{'color' : (filterfor==='mytask') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.filter.myTasks">My Tasks</span>
        </a>

        <span mat-menu-item class="overflowvisible"
          [ngStyle]="{'color' : (filterfor==='users') ? '#005fd5' : 'black'}">
          <div (click)="$event.stopPropagation();">
            <app-member-list-menu [groupMembers]="groupMembers" [filterfor]="filterfor" [menuLable]="menuLable"
              [menuFor]="menuFor" (userSelctionEmitter)="onUserSelctionEmitter($event)">
            </app-member-list-menu>
          </div>
        </span>

        <span mat-menu-item class="overflowvisible widepanel">
          <div (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()">
            <button [matMenuTriggerFor]="menuDueDate" class="dropdownbtn" style="padding: 0;">
              <span [ngStyle]="{'cursor': 'pointer','color' : (filterfor==='due_before_today' ||
                filterfor==='due_today' ||
                filterfor==='due_tomorrow'||
                filterfor==='due_week' ||
                filterfor==='due_next_week' ||
                filterfor==='due_14_days') ? 'green' : 'black'}"
                i18n="@@groupBoardBar.filter.dueDate">Due Date</span>
              <span>
                <div class="label-priority low selectedPriority" *ngIf="(filterfor==='due_before_today' ||
                  filterfor==='due_today' ||
                  filterfor==='due_tomorrow'||
                  filterfor==='due_week' ||
                  filterfor==='due_next_week' ||
                  filterfor==='due_14_days')">
                  {{
                    filterfor==='due_before_today'?"Before today":
                    filterfor==='due_today'?"Today":
                    filterfor==='due_tomorrow'?"Tomorrow":
                    filterfor==='due_week'?"This week":
                    filterfor==='due_next_week'?"Next week":
                    filterfor==='due_14_days'?"Next 14 days":""
                  }}
                </div>
              </span>
            </button>
            <mat-menu #menuDueDate="matMenu">

              <a mat-menu-item (click)="filterTask('due_before_today')" style="margin: 10px;text-decoration: none;">
                <span i18n="@@groupBoardBar.filter.beforeToday">Before today</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_today')" style="margin: 10px;text-decoration: none;">
                <span i18n="@@groupBoardBar.filter.today">Today</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_tomorrow')" style="margin: 10px;text-decoration: none;">
                <span i18n="@@groupBoardBar.filter.tomorrow">Tomorrow</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_week')" style="margin: 10px;text-decoration: none;">
                <span i18n="@@groupBoardBar.filter.thisWeek">This week</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_next_week')" style="margin: 10px;text-decoration: none;">
                <span i18n="@@groupBoardBar.filter.nextWeek">Next week</span>
              </a>

              <a mat-menu-item (click)="filterTask('due_14_days')" style="margin: 10px;text-decoration: none;">
                <span i18n="@@groupBoardBar.filter.next14Days">Next 14 days</span>
              </a>

            </mat-menu>
          </div>
        </span>

        <a mat-menu-item (click)="filterTask('ideas')" *ngIf="isIdeaModuleAvailable"
          [ngStyle]="{'color' : (filterfor==='ideas') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.filter.ideas">Ideas</span>
        </a>

        <a mat-menu-item (click)="openAdvancedFilterDialog()" *ngIf="isIdeaModuleAvailable"
          [ngStyle]="{'color' : (filterfor==='custom_field') ? '#005fd5' : 'black'}">
          <span i18n="@@groupBoardBar.filter.advancedFilters">Advanced Filters</span>
        </a>
      </mat-menu>

      <span class="separator"></span>

      <button class="btn badge-automator" (click)="exportTo('excel')">
        <span class="material-icons-outlined mr-2">file_download</span>
        <span i18n="@@groupBoardBar.export">Export</span>
      </button>
    </div>
</nav>
