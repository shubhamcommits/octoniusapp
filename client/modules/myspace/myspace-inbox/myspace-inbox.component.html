<!-- Group Activity feed starts (Shared Module) -->
<!-- <app-group-activity-feed *ngIf="userData"></app-group-activity-feed> -->
<!-- Group Activity feed ends (Shared Module) -->

<div class="container">
  <div class="row main-actvity">
    <div class="col-md-12 scrolling-wrapper">
      <div class="col-md-3 box">
        <!-- Task Smart Card Starts -->
        <app-task-smart-card></app-task-smart-card>
        <!-- Task Smart Card Ends -->
      </div>

      <div class="col-md-3 box">
        <!-- Agenda Smart Card Starts -->
        <app-agenda-smart-card [routerLink]="'/dashboard/myspace/agenda'"></app-agenda-smart-card>
        <!-- Agenda Smart Card Ends -->
      </div>
    </div>

    <div class="col-md-12">
      <!-- Empty State starts -->
      <div *ngIf="notificationsData.unreadNotifications.length === 0 && !(isLoading$ | async)" style="text-align: center;">
        <img src='assets/images/overview-emptystate.svg' style="width: 70%;">
      </div>
      <!-- Empty State ends -->

      <div class="notifications" *ngIf="notificationsData.unreadNotifications.length > 0 && !(isLoading$ | async)" >

        <div class="notification-item">
          <h6>Recent activities</h6>
          <div class="notification_more">
            <i class="material-icons-outlined ml-2 muted" [matMenuTriggerFor]="general_menu" style="cursor: pointer;">more_horiz</i>
            <mat-menu #general_menu="matMenu">
              <a mat-menu-item (click)="markAllNotificationAsRead()">
                <i class="material-icons-outlined ml-2" style="margin-right: .7rem;">check_circle_outline</i>
                <span>Mark All As Read</span>
              </a>
            </mat-menu>
          </div>
        </div>
        <!-- NOTIFICATION ITEM STARTS-->
        <div class="notification-item" *ngFor="let notification of notificationsData?.unreadNotifications;">
          <div class="notification_actor">
            <img src="{{ baseUrl }}/{{notification?._actor?.profile_pic}}"
              onerror="this.src='assets/images/user.png'" alt="" class="feed-avatar"
              style="margin-right:15px">
          </div>

          <div class="notification_title">
            {{ notification?._actor?.first_name }} {{ notification?._actor?.last_name }}
            <span
            [ngClass]="{
              'assignment_notification': notification?.type === 'assignment',
              'mention_notification': notification?.type === 'mention',
              'completed_notification': notification?.type === 'completed',
              'started_notification': notification?.type === 'started'
            }">
              {{ notification?.message }}
            </span>
            <span class="notification_post_title">{{ notification?._origin_post?.title | truncatetext: 20 }}</span>
          </div>

          <div class="notification_date_time">
            <span class="muted text-small float-right">{{ notification?.created_date | date: 'MMMM d, y HH:mm' }}</span>
          </div>

          <div class="notification_tag">
            <div class="tags" *ngIf="notification?._origin_post?.tags.length <= 1">
              <span class="badge" *ngFor="let tag of notification?._origin_post?.tags">
                {{ tag }}
              </span>
            </div>
            <div class="tags" *ngIf="notification?._origin_post?.tags.length > 1">
              <span class="badge">
                {{ notification?._origin_post?.tags[0] }}
              </span>
              <span class="badge">
                +{{ notification?._origin_post?.tags.length-1 }}
              </span>
            </div>
          </div>

          <div class="notification_more">
            <i class="material-icons-outlined ml-2 muted" [matMenuTriggerFor]="menu" style="cursor: pointer;">more_horiz</i>
            <mat-menu #menu="matMenu">
              <a mat-menu-item (click)="viewNotification(notification?._origin_post?._id, notification?._origin_post?.type, notification?._origin_post?._group)">
                <i class="material-icons-outlined ml-2" style="margin-right: .7rem;">visibility</i>
                <span>View</span>
              </a>
              <a mat-menu-item (click)="markNotificationAsRead(notification._id, userData._id)">
                <i class="material-icons-outlined ml-2" style="margin-right: .7rem;">check_circle_outline</i>
                <span>Mark As Read</span>
            </a>
            </mat-menu>
          </div>
        </div>
        <!-- NOTIFICATION ITEM ENDS-->
      </div>

      <!-- Loading Spinner Starts -->
      <ng-container *ngIf="isLoading$ | async">
        <app-loading-spinner class="media"></app-loading-spinner>
      </ng-container>
      <!-- Loading Spinner Ends -->
    </div>
  </div>
</div>

<!--
<mat-grid-list cols="2" rowHeight="100px">
  <mat-grid-tile [colspan]="1" [rowspan]="1">
    <app-task-smart-card></app-task-smart-card>
  </mat-grid-tile>
  <mat-grid-tile [colspan]="1" [rowspan]="1">
    <app-agenda-smart-card [routerLink]="'/dashboard/myspace/agenda'"></app-agenda-smart-card>
  </mat-grid-tile>
  <mat-grid-tile [colspan]="2" [rowspan]="1">
    <div *ngIf="notificationsData.unreadNotifications.length === 0 && !(isLoading$ | async)" style="text-align: center;">
      <img src='assets/images/overview-emptystate.svg' style="width: 70%;">
    </div>

    <div class="notifications" *ngIf="notificationsData.unreadNotifications.length > 0 && !(isLoading$ | async)" >

      <h6>Recent activities</h6>

      <div class="notification-item" *ngFor="let notification of notificationsData?.unreadNotifications;">
        <div class="notification_actor">
          <img src="{{ baseUrl }}/{{notification?._actor?.profile_pic}}"
            onerror="this.src='assets/images/user.png'" alt="" class="feed-avatar"
            style="margin-right:15px">
        </div>

        <div class="notification_title">
          {{notification?._actor?.first_name}} {{notification?.message}}
        </div>

        <div class="notification_date_time">
          <span class="muted text-small float-right">{{ notification?.created_date | date: 'MMMM d, y HH:mm' }}</span>
        </div>

        <div class="notification_tag">
          <div class="tags">
            <span class="badge">Test</span>
          </div>
        </div>

        <div class="notification_more">
          <i class="material-icons-outlined ml-2 muted" [matMenuTriggerFor]="menu" style="cursor: pointer;">more_horiz</i>
          <mat-menu #menu="matMenu">
              <a mat-menu-item (click)="openFullscreenModal()">
                  <i class="material-icons-outlined ml-2" style="margin-right: .7rem;">visibility</i>
                  <span>View</span>
              </a>
          </mat-menu>
        </div>
      </div>
    </div>
  </mat-grid-tile>
</mat-grid-list>

<ng-container *ngIf="isLoading$ | async">
  <app-loading-spinner class="media"></app-loading-spinner>
</ng-container>
-->
