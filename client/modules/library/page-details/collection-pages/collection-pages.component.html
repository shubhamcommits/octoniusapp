<mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
	<!-- This is the tree node template for leaf nodes -->
	<mat-tree-node *matTreeNodeDef="let page" matTreeNodePadding>
		<!-- use a disabled button to provide padding for tree leaf -->
		<button mat-icon-button disabled></button>
		
		<button class="btn btn-light" style="font-family: 'Nunito';"
			[routerLink]="['/dashboard', 'work', 'groups', 'library', 'collection', 'page']"
			[queryParams]="{ page: page?._id  }" [matTooltip]="page?.title">
			{{ page?.title | truncatetext: 20 }}
		</button>

		<div style="padding-left: 20px;" *ngIf="canEdit">
			<i class="material-icons-outlined ml-2" [matMenuTriggerFor]="menu" style="cursor: pointer;">more_horiz</i>
		
			<mat-menu #menu="matMenu">
				<a class="btn btn-light mb-3 mt-3" type="button" (click)="createSubPage(page?._id, page?.level)">
					<i class="material-icons">add</i>
					<span i18n="@@collectionPages.newChild" style="font-family: 'Nunito';">New child page</span>
				</a>
		
				<a class="btn btn-light mb-3 mt-3" type="button" (click)="deletePage(page)">
					<i class="material-icons">delete</i>
					<span i18n="@@collectionPages.newChild" style="font-family: 'Nunito';">Delete Page</span>
				</a>
			</mat-menu>
		</div>
	</mat-tree-node>

	<!-- This is the tree node template for expandable nodes -->
	<mat-tree-node *matTreeNodeDef="let page;when: hasChild" matTreeNodePadding>
		<button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + page.title">
			<mat-icon class="mat-icon-rtl-mirror">
				{{ treeControl.isExpanded(page) ? 'expand_more' : 'chevron_right' }}
			</mat-icon>
		</button>
		
		<button class="btn btn-light" style="font-family: 'Nunito';"
			[routerLink]="['/dashboard', 'work', 'groups', 'library', 'collection', 'page']"
			[queryParams]="{ page: page?._id  }" [matTooltip]="page?.title">
			{{ page?.title | truncatetext: 20 }}
		</button>
		
		<div style="padding-left: 20px;" *ngIf="canEdit">
			<i class="material-icons-outlined ml-2" [matMenuTriggerFor]="menu" style="cursor: pointer;">more_horiz</i>
		
			<mat-menu #menu="matMenu">
				<a class="btn btn-light mb-3 mt-3" type="button" (click)="createSubPage(page?._id, page?.level)">
					<i class="material-icons">add</i>
					<span i18n="@@collectionPages.newChild" style="font-family: 'Nunito';">New child page</span>
				</a>
		
				<a class="btn btn-light mb-3 mt-3" type="button" (click)="deletePage(page)">
					<i class="material-icons">delete</i>
					<span i18n="@@collectionPages.newChild" style="font-family: 'Nunito';">Delete Page</span>
				</a>
			</mat-menu>
		</div>
	</mat-tree-node>
</mat-tree>
