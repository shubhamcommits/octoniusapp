<div class="container-fluid" style="margin-top: 30px;margin-left: 20px;">
  <div class="row">
    <h5 class="title">
      {{ workspaceData?.company_name }}
    </h5>
  </div>

  <div class="row">
    <div mat-dialog-title class="inner-addon">
      <div class="left-addon">
        <i class="material-icons">search</i>
        <input type="text" name="search" id="" placeholder="Search deeper..." class="search-input" autocomplete="false"
          [(ngModel)]="searchQuery" (ngModelChange)="search()" style="width: 90%;">
      </div>

      <div class="right-addon">
        <i class="material-icons muted" style="cursor: pointer;" (click)="showAdvancedFilters=!showAdvancedFilters">tune</i>
      </div>
    </div>
  </div>

  <div *ngIf="showAdvancedFilters" class="filterwrapper">
    <div class="advanced-filters">
      <div class="filter-label" i18n="@@organization.skill">Skill</div>
      <div class="filter-cell">

          <div *ngFor="let skill of advancedFilters?.skills; let i = index;">

              <button type="button" name="button" class="btn tagslabel" (click)="removeSkill(i)">
                {{skill}}
                <i class="material-icons" matTooltipPosition="above" matTooltip="Delete this skill">close</i>
              </button>
            </div>


        <app-component-search-input-box
          [placeholder]="'Add skill'"
          [type]="'skill'"
          [tagList]="advancedFilters?.skills"
          (skill)="addNewSkill($event)">
        </app-component-search-input-box>
      </div>
    </div>

    <div class="advanced-filters" *ngIf="customFields && customFields?.length > 0">
      <div class="filter-label" i18n="@@organization.customFields">Custom Fields</div>
      <div class="filter-cell">
        <mat-select [(value)]="advancedFilters.cfName" (selectionChange)="selectCFName($event)" appearance="fill" style="width: 20%;">
          <mat-option [value]="cf.name" *ngFor="let cf of customFields">{{ cf.title }}</mat-option>
        </mat-select>
      </div>
    </div>

    <div class="advanced-filters" *ngIf="customFields && customFields?.length > 0 && selectedCustomField">
      <div class="filter-label"></div>
      <div class="filter-cell">
        <mat-select *ngIf="!selectedCustomField.input_type && !selectedCustomField.input_type_number && !selectedCustomField.input_type_text && !selectedCustomField.input_type_date"
            [(value)]="advancedFilters.cfValue" (selectionChange)="selectCFValue($event)" appearance="fill" style="width: 20%;">
          <mat-option [value]="cfValue" *ngFor="let cfValue of selectedCustomField.values">{{ cfValue }}</mat-option>
        </mat-select>

        <input *ngIf="selectedCustomField.input_type || selectedCustomField.input_type_number || selectedCustomField.input_type_text || selectedCustomField.input_type_date"
            type="search" id="keyword" autocomplete="off" placeholder="Search Content" class="input-search"
          [(ngModel)]="advancedFilters.cfValue" (ngModelChange)="selectCFValue($event)"/>
      </div>
    </div>

    <div class="actions">
      <button class="btn btn-outline-danger" (click)="clear()" i18n="@@organization.clear">
        Clear
      </button>
      &nbsp;&nbsp;
      <button class="btn btn-primary" (click)="showAdvancedFilters = !showAdvancedFilters" i18n="@@organization.close">
        Close
      </button>
    </div>
  </div>

  <div class="media-body">
    <div *ngIf="searchedUsers && searchedUsers.length > 0 && !isLoading$" class="results row" style="overflow: hidden;">
      <app-people-directory-search-results [searchedUsers]="searchedUsers" style="width: 90%;"></app-people-directory-search-results>
    </div>

    <div *ngIf="(!searchedUsers || searchedUsers.length == 0) && !isLoading$" class="row cards-list" style="margin-top: 50px;">
      <div class="card">
        <div class="img-fluid">
          <div class="card-title">
            <span i18n="@@organization.peopleDirectory">People Directory</span>
          </div>
          
          <div class="card-content">
            <p i18n="@@organization.cardDescriptionPeopleDirectory">
              Search and connect with other employees.
            </p>
          
            <img src="assets/images/people_directory.png" alt="" class="card-img-top">
          </div>

          <div class="card-footer" [routerLink]="['/dashboard', 'work', 'organization', 'directory']">
            <div>
              <span i18n="@@organization.viewPeople">View Directory</span>
				      <i class="material-icons">arrow_forward</i>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="img-fluid">
          <div class="card-title">
            <span i18n="@@organization.organizationChart">Organization Chart</span>
          </div>
      
          <div class="card-content">
            <p i18n="@@organization.cardDescriptionOrganizationChart">
              Check out the organization chart to understand how your company is structured.
            </p>
      
            <img src="assets/images/organization-chart.png" alt="" class="card-img-top">
          </div>
      
          <div class="card-footer" [routerLink]="['/dashboard', 'work', 'organization', 'chart']">
            <div>
              <span i18n="@@organization.openChart">Open Chart</span>
              <i class="material-icons">arrow_forward</i>
            </div>
          </div>
        </div>
      </div>

      <div class="card" *ngIf="!!userData?.hr_role || userData?.role?.trim() == 'owner'">
        <div class="img-fluid">
          <div class="card-title">
            <span i18n="@@organization.hiveHR">Hive HR</span>
          </div>
      
          <div class="card-content">
            <p i18n="@@organization.cardDescriptionHiveHR">
              Manage people and payroll information
            </p>
      
            <img src="assets/images/hive-hr.png" alt="" class="card-img-top">
          </div>
      
          <div class="card-footer" [routerLink]="['/dashboard', 'work', 'organization', 'hive']">
            <div>
              <span i18n="@@organization.openHive">Open Hive</span>
              <i class="material-icons">arrow_forward</i>
            </div>
          </div>
        </div>
      </div>

      <!-- People Directory Card Starts -->
      <app-people-directory-card [isDashboard]="false" class="card" style="cursor: auto;"></app-people-directory-card>
      <!-- People Directory Card Ends -->
    </div>
  </div>

  <!-- Loading Spinner Starts -->
  <ng-container *ngIf="isLoading$">
    <app-loading-spinner></app-loading-spinner>
  </ng-container>
  <!-- Loading Spinner Ends -->
</div>
