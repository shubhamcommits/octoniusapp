<div class="container-fluid" style="margin-top: 30px;margin-left: 20px;">
  <div class="row">
    <h5 class="title">
      {{ workspaceData?.company_name }}
    </h5>
  </div>

  <div class="row">
    <div mat-dialog-title class="inner-addon">
      <div class="left-addon">
        <i class="material-icons">search</i>
        <input type="text" name="search" id="" placeholder="Search deeper..." class="search-input" autocomplete="false"
          [(ngModel)]="searchQuery" (ngModelChange)="search()" style="width: 90%;">
      </div>

      <div class="right-addon">
        <i class="material-icons muted" style="cursor: pointer;" (click)="showAdvancedFilters=!showAdvancedFilters">tune</i>
      </div>
    </div>
  </div>

  <div *ngIf="showAdvancedFilters" class="filterwrapper">
    <div class="advanced-filters">
      <div class="filter-label" i18n="@@peopleDirectory.skill">Skill</div>
      <div class="filter-cell">

        <div *ngFor="let skill of advancedFilters?.skills; let i = index;">
          <button type="button" name="button" class="btn tagslabel" (click)="removeSkill(i)">
            {{skill}}
            <i class="material-icons" matTooltipPosition="above" matTooltip="Delete this skill">close</i>
          </button>
        </div>

        <app-component-search-input-box
          [placeholder]="'Add skill'"
          [type]="'skill'"
          [tagList]="advancedFilters?.skills"
          (skill)="addNewSkill($event)">
        </app-component-search-input-box>
      </div>
    </div>

    <div class="advanced-filters" *ngIf="customFields && customFields?.length > 0">
      <div class="filter-label" i18n="@@peopleDirectory.customFields">Custom Fields</div>
      <div class="filter-cell">
        <mat-select [(value)]="advancedFilters.cfName" (selectionChange)="selectCFName($event)" appearance="fill" style="width: 20%;">
          <mat-option [value]="cf.name" *ngFor="let cf of customFields">{{ cf.title }}</mat-option>
        </mat-select>
      </div>
    </div>

    <div class="advanced-filters" *ngIf="customFields && customFields?.length > 0 && selectedCustomField">
      <div class="filter-label"></div>
      <div class="filter-cell">
        <mat-select *ngIf="!selectedCustomField.input_type && !selectedCustomField.input_type_number && !selectedCustomField.input_type_text && !selectedCustomField.input_type_date"
            [(value)]="advancedFilters.cfValue" (selectionChange)="selectCFValue($event)" appearance="fill" style="width: 20%;">
          <mat-option [value]="cfValue" *ngFor="let cfValue of selectedCustomField.values">{{ cfValue }}</mat-option>
        </mat-select>

        <input *ngIf="selectedCustomField.input_type || selectedCustomField.input_type_number || selectedCustomField.input_type_text || selectedCustomField.input_type_date"
            type="search" id="keyword" autocomplete="off" placeholder="Search Content" class="input-search"
          [(ngModel)]="advancedFilters.cfValue" (ngModelChange)="selectCFValue($event)"/>
      </div>
    </div>

    <div class="actions">
      <button class="btn btn-outline-danger" (click)="clear()" i18n="@@peopleDirectory.clear">
        Clear
      </button>
      &nbsp;&nbsp;
      <button class="btn btn-primary" (click)="showAdvancedFilters = !showAdvancedFilters" i18n="@@peopleDirectory.close">
        Close
      </button>
    </div>
  </div>

  <div class="media-body" *ngIf="searchedUsers && searchedUsers.length > 0 && !isLoading$">
    <app-people-directory-search-results [searchedUsers]="searchedUsers"></app-people-directory-search-results>
  </div>

  <div *ngIf="(!searchedUsers || searchedUsers.length == 0) && !isLoading$" class="media-body" style="margin-top: 30px;">
    <img src='assets/images/placeholder_peopledirectory.png' class="placeholder-img" style="float: left;">
    <div style="width: 50%;margin-left: 40%;padding-top: 30px;">
      <p class="muted text-left" i18n="@@peopleDirectory.searchForPeople">
        Search for people inside your organization.
      </p>
      <br />
      <p class="muted text-left" i18n="@@peopleDirectory.purposeOfPeopleDirectory">
        The purpose of <span style="color: #2AA578;">People Directory</span> is to help you find colleagues and make it easier to connect with them.
      </p>
      <br />
      <p class="muted text-left" i18n="@@peopleDirectory.searchForthings">
        Search for things like: name, job title, department, skills...
      </p>
    </div>
  </div>

  <!-- Loading Spinner Starts -->
  <ng-container *ngIf="isLoading$">
    <app-loading-spinner></app-loading-spinner>
  </ng-container>
  <!-- Loading Spinner Ends -->
</div>
