
<div class="card-tile">

  <div class="row">
    <div class="col-md-4">
       
        <button type="button" class="btn btn-outline-warning" (click)="fileInput.click()" style="margin-right: 15px">
            <input id="cin" #fileInput type="file" style="display: none"
                   (change)="addFileEvent($event)" placeholder="File" multiple />
                  <span> Add Files</span>
                   <i class="material-icons label">
                    insert_drive_file
                    </i>
          </button>

          
          <button type="button" class="btn btn-outline-warning" (click)="folderInput.click()">
              <input id="cin" #folderInput type="file" style="display: none"
                     (change)="addFolderEvent(folderInput.files)" placeholder="File" webkitDirectory />
                   <span>  Add Folders</span>
                     <i class="material-icons label">
                      folder
                      </i>
            </button>
            <p class="small muted" style="margin-top: 10px">Upload files or folders to make them available to your team.</p>
       </div>
       <div class="col-md-8 text-right"><img src="/assets/images/files_placeholder.svg" alt=""></div>

    </div>


</div>
<div class="card-tile">
  <h4>Everything uploaded by your team </h4>
  <hr>
    <div *ngIf="isLoading$ | async">
      <div class="load-8">
        <h6><b>Loading Data...</b></h6>
          <div class="line"></div>
      </div>
  </div>
  <div *ngIf="!(isLoading$ | async)">
  <div *ngIf="this.has_file == true; else svg">
    <div *ngFor="let post of allFiles; let i = index">
      <div  *ngIf="post?.files">
      <div class="media card-tile user-list" *ngFor="let file of post.files; let x = index" >

            <div class="media-body row">
              <div *ngIf = "file?.mimeType" class="col-md-7">
                  <img src= "/assets/images/{{file.mimeType}}-file-icon.png" onerror="this.src='/assets/images/file-icon.png'"class="feed-avatar float-left">
            
                    <p style="padding-top:10px; margin:0"><a role="button" href="/uploads/{{file.modified_name}}" class="btn btn-link">{{file?.orignal_name}}</a></p>
              </div>
             
              <div class="col-md-4 text-left">
                  <img src="{{this.BASE_URL}}/uploads/{{post._posted_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'"class="feed-avatar float-left">
                  <h4 style="padding-top:20px">{{post._posted_by?.first_name}} {{post._posted_by?.last_name}}</h4>
              </div>
              <div class="col-md text-right" style="padding-top: 10px">
                        
                  <div ngbDropdown #postActionsDrop="ngbDropdown" class="d-inline-block">
                      <i class="material-icons action" ngbDropdownToggle>more_vert</i>
                      <div ngbDropdownMenu aria-labelledby="postActionsDrop">
                          <li> 
                              <a role="button" class="btn btn-link" href="/uploads/{{file.modified_name}}" target="_blank">
                                 <i class="material-icons label">
                                  visibility
                                  </i>Preview</a>          
                          </li>
                          <li> 
                              <button class="btn btn-link" (click)="onDownlaodFile(file.modified_name,file.orignal_name)">
                                <i class="material-icons label">
                                  cloud_download
                                  </i>
                                  Download
                                </button> 
                            </li>
                            <li>
                                <button class="btn btn-link" (click)="onDeleteGroupFiles(post,file,'group_file')">
                                    <i class="material-icons label">
                                      delete
                                    </i>
                                    Delete
                                </button>
                              </li>
                      </div>
                    </div>
              </div>
             
            </div>
        </div>
      </div>
        <div class="media card-tile user-list" *ngIf="post?._name" >
          <div class="media-body row">
              <div class="col-md-7">
              <img src= "/assets/images/agora-file-icon.png" onerror="this.src='/assets/images/file-icon.png'"class="feed-avatar float-left">
              <p style="padding-top:10px; margin:0"><a role="button" [routerLink]="['/dashboard', 'group', post?._group_id, 'files', post?._post_id]" routerLinkActive="router-link-active" >{{post._name}}</a></p>
               </div>
               <div class="col-md-4 text-left">
                  <img src="{{this.BASE_URL}}/uploads/{{post._posted_by?.profile_pic}}" onerror="this.src='/assets/images/user.png'"class="feed-avatar float-left">
                  <h4 style="padding-top:20px">{{post._posted_by?.first_name}} {{post._posted_by?.last_name}}</h4>
              </div>
             
            
            <div class="col-md text-right" style="padding-top: 10px">
                    
                    <div ngbDropdown (openChange)="toggled($event)" #postActionsDrop="ngbDropdown" class="d-inline-block">
                        <i class="material-icons action" ngbDropdownToggle>more_vert</i>
                        <div ngbDropdownMenu aria-labelledby="postActionsDrop">
                            <li> 
                                <a role="button" class="btn btn-link text-center" [routerLink]="['/dashboard', 'group', post?._group_id, 'files', post?._post_id]" routerLinkActive="router-link-active" > 
                                  <i class="material-icons">
                                    visibility
                                  </i>Preview</a>            
                            </li>
                            <li> 
                                <button class="btn btn-link" >
                                  <i class="material-icons">
                                    cloud_download
                                    </i> Download</button>    
                              </li>
                              <li>
                                  <button class="btn btn-link" (click)="onDeleteGroupFiles(post,'filename','agora_file')" >
                                    <i class="material-icons">
                                      delete
                                    </i >Delete</button>
                                </li>
                        </div>
                      </div>
          </div>
        </div>
      </div>
<ng-template #svg>
    <img src='../../../../../assets/images/emptyfiles.svg' style=" margin: 0 auto; display:block; width: 600px">
</ng-template>

</div>

