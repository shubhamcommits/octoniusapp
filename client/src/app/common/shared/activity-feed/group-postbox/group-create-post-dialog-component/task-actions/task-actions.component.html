<div class="content-box">
  <p class="box-title">Actions</p>
  <div *ngIf="!postData?.task?._parent_task">
    <button mat-menu-item [matMenuTriggerFor]="transferMenu" (click)="saveTransferAction('copy')">
      <i  class="material-icons">content_copy</i>
      Copy to Group
    </button>
    <button mat-menu-item [matMenuTriggerFor]="transferMenu" (click)="saveTransferAction('move')">
      <i class="material-icons">arrow_forward</i>
      Move to Group
    </button>

    <mat-menu #transferMenu="matMenu">
      <ng-container *ngFor="let group of userGroups; let index = index">
        <button mat-menu-item [matMenuTriggerFor]="columnsMenu">{{ group.group_name }}</button>
        <mat-menu #columnsMenu="matMenu">
          <button *ngFor="let section of userGroups[index]?.sections" mat-menu-item (click)="transferToGroup(userGroups[index]?._id, section)">{{ section.title }}</button>
        </mat-menu>
      </ng-container>
    </mat-menu>
  </div>
  <div *ngIf="!parentTask && !isdependent" class="set-parent">
    Make subtask of

    <!-- INPUT BAR STARTS -->
    <input type="search" id="keyword" autocomplete="off" placeholder="Search for a task" class="input-search"
      [(ngModel)]="itemValue" (keyup)="onSearch($event)" (ngModelChange)="modelChange($event)" />
    <!-- INPUT BAR ENDS -->
  <div *ngIf="searchingOn === 'keyword'">
    <section id="results" *ngIf="!(isLoadingAction$ | async)" class="results" onfocusout="">
      <div class="media task-item user-list mb-0" *ngFor=" let task of tasksList; let index = index;">
        <div class="media-body mt-2">
          <!-- Display full name of the member starts -->
          <h4 class="mt-0 full-name-text" (click)="setParentTask(task._id)">
            {{ task?.title | truncatetext: 50 }}
          </h4>
          <!-- Display full name of the member ends -->
        </div>
      </div>
    </section>


      <!-- LOADING SPINNER STARTS -->
      <ng-container *ngIf="(isLoadingAction$ | async)">
        <app-loading-spinner class="media"></app-loading-spinner>
      </ng-container>
  </div>
      <!-- LOADING SPINNER ENDS -->
  </div>


  <div *ngIf="groupData && !ischild && groupData.project_type" class="set-parent">
    Make Dependency for

    <!-- INPUT BAR STARTS -->
    <input type="search" id="dependencyKeyword" autocomplete="off" placeholder="Search for a task" class="input-search"
      [(ngModel)]="dependencyItemValue" (keyup)="onSearch($event)" (ngModelChange)="modelChangeForDependency($event)" />
    <!-- INPUT BAR ENDS -->
    <div *ngIf="searchingOn === 'dependencyKeyword'">
    <section id="results" *ngIf="!(isLoadingAction$ | async)" class="results" onfocusout="">
      <div class="media task-item user-list mb-0" *ngFor=" let task of tasksList; let index = index;">
        <div class="media-body mt-2" *ngIf="task.type === 'task' ">
          <!-- Display full name of the member starts -->
          <h4 class="mt-0 full-name-text" (click)="setDependencyTask(task._id)">
            {{ task?.title | truncatetext: 50 }}
          </h4>
          <!-- Display full name of the member ends -->
        </div>
      </div>
    </section>


      <!-- LOADING SPINNER STARTS -->
      <ng-container *ngIf="isLoadingAction$ | async">
        <app-loading-spinner class="media"></app-loading-spinner>
      </ng-container>
      <!-- LOADING SPINNER ENDS -->
    </div>
  </div>

</div>
