<div class="smart-card" style="padding: 10px;">
  <div class="row" style="margin: 0 0 20px; justify-content: space-between;">
    <div class="card-title mt-1">
      Team workload
    </div>
  </div>

  <div>
    <div class="row text-center">
      <div class="col-md-4">
        <div class="btn btn-primary" (click)="changeDates(7, 'sub')">
            Previous Week
        </div>
        <!--
        <div class="btn btn-primary" (click)="changeDates(1, 'sub')">
            Yesterday
        </div>
        -->
      </div>
      <div class="col-md-4">
          <h3>{{ dates[0] | date:'MMM dd, yyyy' }} - {{ dates[dates?.length - 1] | date:'MMM dd, yyyy' }}</h3>
      </div>
      <div class="col-md-4">
        <div class="btn-group">
          <!--
          <div class="btn btn-primary" (click)="changeDates(1, 'add')">
              Tomorrow
          </div>
          -->
          <div class="btn btn-primary" (click)="changeDates(7, 'add')">
              Next Week
          </div>
        </div>
      </div>
    </div>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th class="header"> {{ currentMonth }} </th>
            <th *ngFor="let date of dates" [ngClass]="{'muted': !isCurrentDay(date), 'weekend': isWeekend(date)}"> {{ date | date: 'dd' }} </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let member of groupMembers">
            <td>
              <div class="member">
                <div>
                  <img src="{{ baseUrl }}/{{member?.profile_pic}}" onerror="this.src='assets/images/user.png'"
                    class="feed-avatar ml-2" (click)="openFullscreenModal(member?._id)" />
                </div>
                <div class="name">
                  {{ member?.first_name }}  {{ member?.last_name }}
                  <p class="muted"> {{ member?.current_position }} </p>
                </div>
              </div>
            </td>
            <td *ngFor="let workload of member.workload"
              [ngStyle]="{'background-color': (workload?.isOutOfTheOffice) ? 'rgba(0, 95, 213, 0.12)' : ''}">
                <i  class="material-icons muted">task_alt</i> &nbsp;
                <span class="badge badge-done">{{ workload.numDoneTasks }}</span> / <span class="badge">{{ workload.numTasks }}</span>
                <br />
                <span class="allocation">
                  <i  class="material-icons">update</i> &nbsp;&nbsp;
                  {{ workload.allocation || 0 }} h
                </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="col-5" *ngIf="groupMembers.length === 0">
    <img src='assets/images/inbox-tasks-card-empty.svg'>
  </div>

  <!-- LOADING SPINNER STARTS -->
  <ng-container *ngIf="isLoading$ | async">
    <app-loading-spinner></app-loading-spinner>
  </ng-container>
  <!-- LOADING SPINNER ENDS -->
</div>
