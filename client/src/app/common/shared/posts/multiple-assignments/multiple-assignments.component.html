<!-- Assignee section for tasks starts -->
<section>
  <app-secured-image *ngFor="let assignee of assigned_to"
    [src]="assignee?.profile_pic"
    [service]="'user'"
    [alt]="assignee?.first_name + ' ' + assignee?.last_name"
    [styleClass]="'feed-avatar-small'"
    [tooltip]="assignee?.first_name + ' ' + assignee?.last_name"
    (click)="unassign(assignee._id)"></app-secured-image>
  <span *ngIf="!assigned_to || assigned_to.length === 0">
    Unassigned
  </span>

  <button *ngIf="(!post?.task?.allocation || post?.task?.allocation == 0) || (assigned_to?.length < 1)"
    mat-button [matMenuTriggerFor]="assigneeSearch" #trigger="matMenuTrigger" class="btn tagslabel">add assignee</button>
  <mat-menu #assigneeSearch="matMenu">
    <div>
      <div class="users-card">
        <div class="form-group">
          <label for="search-text">Assignee</label>
          <input type="email" class="form-control" id="search-text" aria-describedby="search-text" [(ngModel)]="searchText"
            placeholder="Search group member" autofocus
            (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()">
        </div>
        <ul class="assignee-list">
          <li appHighlight class="assignee-list-item" *ngFor="let member of groupMembers | appFilter: searchText"
              (click)="getMemberDetails(member)"
              [searchedWord]="searchText"
              [content]="member">
            {{ member.first_name }} {{ member.last_name }}
          </li>
        </ul>
      </div>
    </div>
  </mat-menu>
</section>
<!-- Assignee section for tasks ends -->
