<li class="list-group-item">
  <div class="card">
    <div class="card-block ">
      <div class="row card-title ">
        <div class="col-md-1 ">
          <img src="{{this.BASE_URL}}/uploads/{{post?._posted_by?.profile_pic}}"
               onerror="this.src='/assets/images/user.png'"
               class="feed-avatar"
               [routerLink]="['/dashboard/profile', post._posted_by?._id, 'profile']"/>
        </div>
        <div class="col-md-7 ">
          <h6>{{post._posted_by?.first_name}} {{post._posted_by?.last_name}} <br>
            <span class="small lightgray date ">
                      {{post?.created_date| date : 'medium'}}</span>
          </h6>

          <span class="assigned" [ngbPopover]="eventassignedmembers" triggers="mouseenter:mouseleave">Assigned
                      to {{post.event._assigned_to.length}} MEMBERS
                    </span>
          <ng-template #eventassignedmembers>
            <ul class="list-group">
              <li class="list-group-item" *ngFor="let element of post.event._assigned_to; let j = index;">
                {{element.first_name}}</li>
            </ul>
          </ng-template>
        </div>
      </div>

      <!-- EDIT EVENT POST -->

      <ng-container *ngIf="displayEditPostSection">
        <div class="col-md-12" style="padding-bottom: 1em;">
          <assign-users-modal
            *ngIf="(post.type === 'event' || post.type === 'task') && !isItMyWorkplace"
            [selectedGroupUsers]="selectedGroupUsers"
            (usersSelected)="usersSelected($event)"
            [settings]="settings"
            [type]="post.type"
            [group]="group">
          </assign-users-modal>
          <date-picker-modal [model_date]="model_date" (picked_date)="setDate($event)"></date-picker-modal>
          <time-picker [model_time]="model_time" (picked_time)="setTime($event)"></time-picker>
          <button class="btn btn-primary" style="float: right;" contenteditable="false" (click)="OnSaveEditPost()">Save</button>
          <button class="btn btn-default" style="float: right;" contenteditable="false"(click)="displayEditPostSection = false;"> Cancel</button>
        </div>
        <div class="col-md-12 innercard">
          <input type="text" [(ngModel)]="edit_title" value="post?.title" style="padding: 12px 15px; font-style: italic; width: 100%; outline: none;" />
          <quill-editor [modules]="modules" type="text" [(ngModel)]="edit_content"
                        [spellcheck]="true" value="post?.content" (blur)="onEditorBlured($event)"
                        (focus)="onEditorFocused($event)" (ready)="onEditorCreated($event)" (change)="onContentChanged($event)"></quill-editor>
        </div>
        <div class="innercard">

          <div class="row">
            <div class="col-md-6">
              <div ngbDropdown autoClose="outside" #myTagsDrop="ngbDropdown">
                <input ngbDropdownToggle
                type="text"
                id="tags"
                class="tags"
                placeholder="Add Tag here"
                ng-show="tags_search_words"
                (keyup)="tagListSearch(); $event.stopPropagation(); myTagsDrop.open();"
                (keydown)="addTags($event); myTagsDrop.close();"
                [(ngModel)]="tags_search_words"
                name="tag"
                placement="top"
                ngbTooltip="Type & hit enter to add a tag">
                  <div class="search-dropdown-menu" ngbDropdownMenu aria-labelledby="myTagsDrop" >
                    <div class="w-100" style="display:inline-block" *ngIf="tags_search_result?.length > 0">
                        <ul class=" list-tags" >
                          <li class="tags" *ngFor="let tag of tags_search_result; let i = index;">
                            <button class="btn btn-light btn-block" (click)="clickedOnTag(i); myTagsDrop.close();">{{ tag?.tags }}</button>
                          </li>
                        </ul>
                      </div>
                </div>
              </div>
            </div>
          </div>
              <br />
            </div>

          <!--POST TAGS-->
     <div class="row innercard" >
      <div class="col-xs" style="margin-left: 20px">  <i class="material-icons tagslabel" ngbTooltip="Tags">
          local_offer
          </i></div>
          <div class="col-md-10" style="margin-left: -20px">
   
      
        <button class="btn badge badge-primary" style="margin-right: 1rem;" (click)="removeTag(i)" *ngFor="let tag of tags; let i = index" placement="top" ngbTooltip="Click here to remove this tag"><b>X</b> {{tag}}</button>
      </div>
    </div>
      </ng-container>

      <ng-container *ngIf="!displayEditPostSection">
      <!-- event post content -->
      <div class="col-md-12 innercard ">
        <div class="row" style="margin-top:10px">
          <div class="col-md-2 dateblock">
            <span class="bigdate">{{post?.event.due_to | amLocal | date :'dd' }}</span>
            <br>
            <span class="time">{{post?.event.due_to | amLocal | date: 'MMMM' }}</span>
            <br>
            <span class="time">{{post.event.due_to | amLocal | date:'HH:mm'}}</span>
          </div>
          <div class="col-md-9">
            <div class="row">
              <!-- Event Post Title -->
              <div class="col-md-12 innercard font-weight-bold" [innerHTML]="post?.title | safe: 'html'">
                </div>
              <!-- Event Post Content -->
              <div class="col-md-12 event-title" [innerHTML]="applyZoom(post?.content)  | safe: 'html' ">

              </div>
            </div>
          </div>

        </div>

              <!-- POST FILES -->
              <div class="col-md-12 innercard" *ngFor="let file of post.files">
                <br>
                <div class = "imagePreview" *ngIf = "file?.mimeType == 'jpg' || file?.mimeType == 'jpeg' || file?.mimeType == 'png' ">
                 <div class="col-md-12 attachfile">  <i class="material-icons event-title">attach_file</i> <a id = "imagePreviewLink" role="button" href="{{this.BASE_URL}}/uploads/{{file.modified_name}}" >{{file?.orignal_name}}</a></div>
              </div>
              <div *ngIf = "file?.mimeType == 'pdf' ">
                <div class="col-md-12 attachfile">  <i class="material-icons event-title">attach_file</i> <a role="button" href="javascript:void(0)" (click) = "pdfPreviewClicked(file.modified_name)" >{{file?.orignal_name}}</a></div>
              </div>
              <div *ngIf = "file?.mimeType == 'docx' || file?.mimeType == 'doc' || file?.mimeType == 'ppt' || file?.mimeType == 'pptx' || file?.mimeType == 'xls' || file?.mimeType == 'xlsx' ">
                <div class="col-md-12 attachfile"> <i class="material-icons event-title">attach_file</i><a role="button" href="javascript:void(0)" (click) = "officeMimeTypeclick(file.modified_name)" >{{file?.orignal_name}}</a></div>
              </div>
              <div *ngIf = "file?.mimeType == 'gif' 
              || file?.mimeType == 'tiff' 
              || file?.mimeType == 'mpeg4'
              || file?.mimeType == 'mov'
              || file?.mimeType == 'avi'
              || file?.mimeType == 'mpegps'
              || file?.mimeType == 'wmv'
              || file?.mimeType == 'flv'
              || file?.mimeType == 'txt'
              || file?.mimeType == 'css'
              || file?.mimeType == 'html'
              || file?.mimeType == 'pages'
              || file?.mimeType == 'ai'
              || file?.mimeType == 'psd'
              || file?.mimeType == 'svg'
              ">
              <div class="col-md-12 attachfile">  <i class="material-icons event-title">attach_file</i><a role="button" href="javascript:void(0)" (click) = "googleMimeTypeclick(file.modified_name)" >{{file?.orignal_name}}</a></div>
            </div>
              <div *ngIf = "
              file?.mimeType != 'jpg' 
              && file?.mimeType != 'jpeg' 
              && file?.mimeType != 'png' 
              && file?.mimeType != 'pdf' 
              && file?.mimeType != 'docx' 
              && file?.mimeType != 'doc' 
              && file?.mimeType != 'ppt' 
              && file?.mimeType != 'pptx' 
              && file?.mimeType != 'xls' 
              && file?.mimeType != 'xlsx'
              && file?.mimeType != 'gif' 
              && file?.mimeType != 'tiff' 
              && file?.mimeType != 'mpeg4'
              && file?.mimeType != 'mov'
              && file?.mimeType != 'avi'
              && file?.mimeType != 'mpegps'
              && file?.mimeType != 'wmv'
              && file?.mimeType != 'flv'
              && file?.mimeType != 'txt'
              && file?.mimeType != 'css'
              && file?.mimeType != 'html'
              && file?.mimeType != 'pages'
              && file?.mimeType != 'ai'
              && file?.mimeType != 'psd'
              && file?.mimeType != 'svg'
              ">
              <div class="col-md-12 attachfile">  <i class="material-icons event-title">attach_file</i><a role="button" href="javascript:void(0)" href="{{this.BASE_URL}}/uploads/{{file.modified_name}}" >{{file?.orignal_name}}</a></div>
              </div>
            </div>

           

            </div>

      <!-- read more / read less button -->
      <!-- <button *ngIf="post?.content?.split('').length > 50 && this.preview" class="btn btn-link mt-3" (click)="this.readMore = !this.readMore">
        <span *ngIf="this.readMore">Read more</span>
        <span *ngIf="!this.readMore">Read less</span>
      </button> -->

      <!--POST TAGS-->
      <div class="row innercard" *ngIf="post?.tags?.length > 0">
          <div class="col-xs" style="margin-left: 20px">  <i class="material-icons tagslabel" ngbTooltip="Tags">
              local_offer
              </i></div>
          <div class="col-md-10" style="margin-left: -20px">
       
            <span class="badge badge-primary" style="margin-right: 0.5rem;" *ngFor="let tag of tags; let i = index">{{tag}}</span>
          </div>
        </div>
      </ng-container>
    
      <!-- POST ACTIONS -->

      <post-actions
        *ngIf="user"
        [post]="post"
        [commentCount]="commentCount"
        [commentsDisplayed]="commentsDisplayed"
        [user]="user"
        (toggleComments)="toggleComments()"
        (sendComments)="setComments($event)"
        (togglePostCommentEditor)="togglePostCommentEditor()"
        (editPost)="editPost()"
        (deletePost)="deletePost()">
      </post-actions>
    </div>
  </div>

  <!-- EVENT POST COMMENT SECTION -->

  <comment-section
    [post]="post"
    [(commentsDisplayed)]="commentsDisplayed"
    [modules]="modules"
    [user]="user"
    [allMembersId]="allMembersId"
    [user_data]="user_data"
    [socket]="socket"
    [group]="group"
    [comments]="comments"
    [(commentCount)]="commentCount">
  </comment-section>
</li>

<div class= "outer-overlay" *ngIf = "pdfSourceLinks || iFrameSourceLinks">
  <div class = "overlay-navbar" *ngIf = "pdfSourceLinks" >
      <div class="row" style="margin-left: 0.5rem;" >
          <a class="navbar-brand" (click) = "overlayRemoval('pdf')" style="cursor: pointer;">
            <i class="material-icons" style = "color:white !important ; margin-top: 5px">
              arrow_back
              </i>
            </a>
      </div>  
    </div>
  <div class = "overlay-navbar" *ngIf = "iFrameSourceLinks" >
      <div class="row" style="margin-left: 0.5rem;" >
          <a class="navbar-brand" (click) = "overlayRemoval('otherFilesForiFrame')" style="cursor: pointer;">
            <i class="material-icons" style = "color:white !important ; margin-top: 5px">
              arrow_back
              </i>
            </a>
      </div>  
    </div>

  <div class = "pdf-source-container" *ngIf = "pdfSourceLinks">
      <div class ="overlayPDF" >
          <pdf-viewer
          class = "overlay-content"
          [src]="pdfSourceLinks" 
          [render-text]="true"
          ></pdf-viewer>
      </div>
  </div>
  <div id = "overlay-iframe" *ngIf = "iFrameSourceLinks">
          <iframe id = "iframe-file" (load)="onLoad()" [src]='iFrameSourceLinks' style="width:100%;height:100%;"></iframe>
  </div>
</div>