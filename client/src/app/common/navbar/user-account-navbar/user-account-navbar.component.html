<nav class="navbar">
  <div class="header">
    <div class="avatar">
      <!-- My user avatar starts -->
      <app-secured-image *ngIf="userData" [imgURL]="userData?.profile_pic" [service]="'user'"
        [styleClass]="'mr-3 feed-avatar'" [placement]="'right'" [tooltip]="'Change your avatar'"
        (click)="openDetails(userContent)"></app-secured-image>
      <!-- My user avatar ends -->
    </div>

    <div class="user-info">
      <div class="name">
        {{ userData?.first_name }} {{ userData?.last_name }}
      </div>

      <div class="bio">
        {{ userData?.bio }}
      </div>
    </div>

    <div class="options" *ngIf="isCurrentUser">
      <i class="material-icons-outlined muted" [matMenuTriggerFor]="menu" style="text-align: center; cursor: pointer;">more_horiz</i>
      <mat-menu #menu="matMenu">
        <a mat-menu-item (click)="openUpdateModel()">
          <i class="material-icons-outlined ml-2" style="margin-right: .7rem;">edit</i>
          <span i18n="@@userAccountNavbar.edit">Edit</span>
        </a>

        <a mat-menu-item (click)="getUserInformation()" *ngIf="isCurrentUser && workspaceData?.integrations?.is_ldap_connected && workspaceData?.ldapPropertiesMap">
          <i class="material-icons ml-2" style="margin-right: .7rem;">cable</i>
          <span i18n="@@userAccountNavbar.syncLDAP">Sync LDAP</span>
        </a>

        <a *ngIf="isCurrentUser" (click)="openUpdatePasswordModal()">
            <i class="material-icons ml-2" style="margin-right: .7rem;">lock</i>
            <span i18n="@@userAccountNavbar.changePassword">Change Password</span>
        </a>

        <a *ngIf="isCurrentUser && userData?.role !='owner'" (click)="removeUser(userData._id)">
          <span i18n="@@userAccountNavbar.deleteAccount">Delete Account</span>
        </a>
      </mat-menu>
    </div>
  </div>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="nav">
      <li class="nav-item">
        <a class="nav-link"
            [routerLink]="['/dashboard', 'user', 'profile']"
            routerLinkActive="active"
            [ngClass]="activeState == 'profile'?'nav-link active-nav':'nav-link'" (click)="changeState('profile')">
              <span i18n="@@userAccountNavbar.profile">Profile</span>
              <span class="sr-only">(current)</span>
        </a>
      </li>

      <li class="nav-item" *ngIf="isOrganizationModuleAvailable">
          <a class="nav-link"
              [routerLink]="['/dashboard', 'user', 'hive']"
              routerLinkActive="active"
              [ngClass]="activeState == 'hive'?'nav-link active-nav':'nav-link'"
              (click)="changeState('hive')">
                <span i18n="@@userAccountNavbar.hiveHR">Hive HR</span>
                <span class="sr-only">(current)</span>
          </a>
      </li>

      <li class="nav-item">
          <a class="nav-link"
              [routerLink]="['/dashboard', 'user', 'clouds']"
              routerLinkActive="active"
              [ngClass]="activeState == 'clouds'?'nav-link active-nav':'nav-link'"
              (click)="changeState('clouds')">
                <span i18n="@@userAccountNavbar.integrations">Integrations</span>
                <span class="sr-only">(current)</span>
          </a>
      </li>

      <li class="nav-item">
          <a class="nav-link"
              [routerLink]="['/dashboard', 'user', 'workload']"
              routerLinkActive="active"
              [ngClass]="activeState == 'workload'?'nav-link active-nav':'nav-link'"
              (click)="changeState('workload')">
                <span i18n="@@userAccountNavbar.timeOff">Time off</span>
                <span class="sr-only">(current)</span>
          </a>
      </li>
    </ul>
  </div>
</nav>

<ng-template #userContent let-modal>
  <app-user-image-details [userData]="userData" [baseUrl]="baseUrl" [workspaceData]="workspaceData">
  </app-user-image-details>
</ng-template>
