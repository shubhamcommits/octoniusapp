FROM node:11.10

WORKDIR '/app'
# COPY ./package.json ./package-lock.json ./
COPY ./package.json ./yarn.lock ./
# RUN apk add --no-cache --virtual .gyp python make g++
#    RUN npm config set unsafe-perm true
#    RUN npm install --global node-gyp \
# RUN yarn global add node-gyp
RUN apt-get update \
            && apt-get install -y node-gyp
RUN yarn global add @angular/cli
               #    && npm config set python python2.7
# RUN yarn add --force node-sass
RUN yarn
# RUN apk del .gyp
COPY ./ ./
EXPOSE 4200
CMD ["yarn", "hmr"]
