(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"4IPy":function(l,n,t){"use strict";var u=t("8Y7J"),e=t("SVse"),i=t("vdBU"),s=t("78I+"),r=t("s7LF");t("xVZP"),t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return C}));var o=u.qb({encapsulation:0,styles:[[".input-search[_ngcontent-%COMP%]{width:100%;height:38px;font-family:Poppins;font-style:normal;font-weight:300;font-size:14px;line-height:21px;background:0 0;border:none;border-bottom:1px solid #000}input[_ngcontent-%COMP%]:focus{outline:0;border-bottom:1px solid #4169e1}.full-name-text[_ngcontent-%COMP%]{font-size:12px;line-height:18px}app-loading-spinner[_ngcontent-%COMP%]{display:flex;margin-top:2%;justify-content:center;align-items:center}"]],data:{}});function c(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,0,"img",[["class","feed-avatar-search"],["onerror","this.src='/assets/images/user.png'"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,u.wb(2,"",n.component.userBaseUrl,"/uploads/",null==n.parent.context.$implicit?null:n.parent.context.$implicit.profile_pic,""))}))}function a(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"h4",[["class","mt-0 full-name-text"]],null,null,null,null,null)),(l()(),u.Mb(1,null,[""," "," "]))],null,(function(l,n){l(n,1,0,null==n.parent.context.$implicit?null:n.parent.context.$implicit.first_name,null==n.parent.context.$implicit?null:n.parent.context.$implicit.last_name)}))}function b(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"h4",[["class","mt-0 full-name-text"]],null,null,null,null,null)),(l()(),u.Mb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.parent.context.$implicit)}))}function p(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,1,"i",[["class","material-icons mr-1 dropdown-toggle-split btn-sm working"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["check_circle"]))],null,null)}function m(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,1,"button",[["class","btn mr-1 btn-primary dropdown-toggle-split btn-sm"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.onAddSkill(l.parent.parent.context.$implicit)&&u),u}),null,null)),(l()(),u.Mb(-1,null,["Add skill "]))],null,null)}function d(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,4,"section",[],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,p)),u.rb(2,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.hb(16777216,null,null,1,null,m)),u.rb(4,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,2,0,t.hasSkill(n.parent.context.$implicit)),l(n,4,0,!t.hasSkill(n.parent.context.$implicit))}),null)}function h(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"i",[["class","material-icons mr-1 dropdown-toggle-split btn-sm working"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["check_circle"]))],null,null)}function g(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"button",[["class","btn btn-primary dropdown-toggle-split btn-sm"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.onAddNewMember(l.parent.parent.context.$implicit)&&u),u}),null,null)),(l()(),u.Mb(-1,null,["add "]))],null,null)}function f(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,4,"section",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,h)),u.rb(3,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),u.hb(0,[["addMem",2]],null,0,null,g))],(function(l,n){l(n,3,0,0==n.parent.context.$implicit.showAddMem,u.Eb(n,4))}),null)}function k(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"i",[["class","material-icons mr-1 dropdown-toggle-split btn-sm working"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["check_circle"]))],null,null)}function I(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"i",[["class","material-icons mr-1 dropdown-toggle-split btn-sm working"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["check_circle"]))],null,null)}function M(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"button",[["class","btn btn-primary dropdown-toggle-split btn-sm"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.addToSelectedMember(l.parent.parent.parent.parent.context.$implicit)&&u),u}),null,null)),(l()(),u.Mb(-1,null,["assign "]))],null,null)}function w(l){return u.Ob(0,[(l()(),u.hb(16777216,null,null,1,null,I)),u.rb(1,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),u.hb(0,[["notAddedToMap",2]],null,0,null,M))],(function(l,n){l(n,1,0,n.component.memberJustAddedToMap(n.parent.parent.parent.context.$implicit),u.Eb(n,2))}),null)}function v(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,k)),u.rb(2,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),u.hb(0,[["addMem",2]],null,0,null,w))],(function(l,n){l(n,2,0,0==n.parent.parent.context.$implicit.showAddMem,u.Eb(n,3))}),null)}function y(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"i",[["class","material-icons mr-1 dropdown-toggle-split btn-sm working"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.removeMemberFromMap(l.parent.parent.parent.context.$implicit)&&u),u}),null,null)),(l()(),u.Mb(-1,null,["check_circle"]))],null,null)}function E(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"i",[["class","material-icons mr-1 dropdown-toggle-split btn-sm working"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.removeMemberFromMap(l.parent.parent.parent.parent.context.$implicit)&&u),u}),null,null)),(l()(),u.Mb(-1,null,["check_circle"]))],null,null)}function x(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"button",[["class","btn btn-primary dropdown-toggle-split btn-sm"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.addToSelectedMember(l.parent.parent.parent.parent.context.$implicit)&&u),u}),null,null)),(l()(),u.Mb(-1,null,["assign "]))],null,null)}function _(l){return u.Ob(0,[(l()(),u.hb(16777216,null,null,1,null,E)),u.rb(1,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),u.hb(0,[["notAddedToMap",2]],null,0,null,x))],(function(l,n){l(n,1,0,n.component.memberJustAddedToMap(n.parent.parent.parent.context.$implicit),u.Eb(n,2))}),null)}function O(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,y)),u.rb(2,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),u.hb(0,[["addMem",2]],null,0,null,_))],(function(l,n){l(n,2,0,0==n.parent.parent.context.$implicit.showAddMem,u.Eb(n,3))}),null)}function S(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,4,"section",[],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,v)),u.rb(2,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.hb(16777216,null,null,1,null,O)),u.rb(4,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,2,0,"task"==t.type),l(n,4,0,"event"==t.type)}),null)}function L(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,15,"div",[["class","media card-tile user-list w-100 mb-0"]],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,c)),u.rb(2,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(3,0,null,null,12,"div",[["class","media-body mt-2"]],null,null,null,null,null)),(l()(),u.sb(4,0,null,null,4,"div",[["class","float-left ml-0 mt-1"]],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,a)),u.rb(6,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.hb(16777216,null,null,1,null,b)),u.rb(8,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(9,0,null,null,6,"div",[["class","btn-group mr-3 ml-2 float-right"]],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,d)),u.rb(11,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.hb(16777216,null,null,1,null,f)),u.rb(13,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.hb(16777216,null,null,1,null,S)),u.rb(15,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,2,0,"skill"!=t.type),l(n,6,0,"skill"!=t.type),l(n,8,0,"skill"==t.type),l(n,11,0,"skill"==t.type),l(n,13,0,"group"==t.type),l(n,15,0,"task"==t.type||"event"==t.type)}),null)}function $(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"section",[],null,null,null,null,null)),(l()(),u.hb(16777216,null,null,1,null,L)),u.rb(2,278528,null,0,e.o,[u.N,u.K,u.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.itemList)}),null)}function N(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),u.sb(1,0,null,null,1,"app-loading-spinner",[["class","media"]],null,null,null,i.b,i.a)),u.rb(2,114688,null,0,s.a,[],null,null)],(function(l,n){l(n,2,0)}),null)}function A(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,12,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,5,"input",[["autocomplete","off"],["class","input-search"],["id","keyword"],["type","search"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,t){var e=!0,i=l.component;return"input"===n&&(e=!1!==u.Eb(l,2)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==u.Eb(l,2).onTouched()&&e),"compositionstart"===n&&(e=!1!==u.Eb(l,2)._compositionStart()&&e),"compositionend"===n&&(e=!1!==u.Eb(l,2)._compositionEnd(t.target.value)&&e),"ngModelChange"===n&&(e=!1!==(i.itemValue=t)&&e),"keyup"===n&&(e=!1!==i.onSearch(t)&&e),"ngModelChange"===n&&(e=!1!==i.modelChange(t)&&e),e}),null,null)),u.rb(2,16384,null,0,r.b,[u.C,u.k,[2,r.a]],null,null),u.Jb(1024,null,r.e,(function(l){return[l]}),[r.b]),u.rb(4,671744,null,0,r.h,[[8,null],[8,null],[8,null],[6,r.e]],{model:[0,"model"]},{update:"ngModelChange"}),u.Jb(2048,null,r.f,null,[r.h]),u.rb(6,16384,null,0,r.g,[[4,r.f]],null,null),(l()(),u.hb(16777216,null,null,2,null,$)),u.rb(8,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),u.Gb(131072,e.b,[u.h]),(l()(),u.hb(16777216,null,null,2,null,N)),u.rb(11,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null),u.Gb(131072,e.b,[u.h])],(function(l,n){var t=n.component;l(n,4,0,t.itemValue),l(n,8,0,!u.Nb(n,8,0,u.Eb(n,9).transform(t.isLoading$))),l(n,11,0,u.Nb(n,11,0,u.Eb(n,12).transform(t.isLoading$)))}),(function(l,n){l(n,1,0,n.component.placeholder,u.Eb(n,6).ngClassUntouched,u.Eb(n,6).ngClassTouched,u.Eb(n,6).ngClassPristine,u.Eb(n,6).ngClassDirty,u.Eb(n,6).ngClassValid,u.Eb(n,6).ngClassInvalid,u.Eb(n,6).ngClassPending)}))}function C(l){return u.Ob(0,[(l()(),u.hb(16777216,null,null,1,null,A)),u.rb(1,16384,null,0,e.p,[u.N,u.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.userData)}),null)}},xVZP:function(l,n,t){"use strict";t.d(n,"a",(function(){return d}));var u=t("mrSG"),e=t("8Y7J"),i=t("SFZf"),s=t("aXYn"),r=t("AytR"),o=t("ds6q"),c=t("iq5f"),a=t("dMDw"),b=t("B/hR"),p=t("4Uf4"),m=t("7RJT");class d{constructor(l){this.injector=l,this.userBaseUrl=r.a.UTILITIES_BASE_URL,this.placeholder="",this.userData={},this.skillEmitter=new e.m,this.memberEmitter=new e.m,this.publicFunctions=new i.a(this.injector),this.itemValueChanged=new o.Subject,this.isLoading$=new m.BehaviorSubject(!1),this.itemList=[],this.subSink=new c.SubSink,this.selectedMembers=new Map,this.members=[]}ngOnInit(){}ngAfterViewInit(){""==this.itemValue&&(this.itemList=[]),this.subSink.add(this.itemValueChanged.pipe(Object(b.distinctUntilChanged)(),Object(a.debounceTime)(500)).subscribe(()=>u.__awaiter(this,void 0,void 0,(function*(){"skill"!=this.type&&"group"!=this.type&&"task"!=this.type&&"event"!=this.type||(""==this.itemValue?this.itemList=[]:("skill"===this.type&&(this.itemList=yield this.searchSkills(this.itemValue)),"task"!==this.type&&"event"!==this.type||(this.itemList=(yield this.publicFunctions.searchGroupMembers(this.groupId,this.itemValue))||[],this.itemList=Array.from(new Set(this.itemList.users))),"group"===this.type&&(this.itemList=yield this.publicFunctions.membersNotInGroup(this.workspaceId,this.itemValue,this.groupId),this.itemList=Array.from(new Set(this.itemList.users))),"skill"===this.type&&(this.itemList.includes(this.itemValue)||""==this.itemValue||(this.itemList=[this.itemValue,...this.itemList]))),this.isLoading$.next(!1))}))))}modelChange(l){""!=l&&null!=l||(this.itemList=[])}onSearch(l){this.isLoading$.next(!0),this.itemValueChanged.next(l)}userSearchQuery(l){return u.__awaiter(this,void 0,void 0,(function*(){try{console.log(l.target.value);let n=yield this.searchWorkspaceMembers(this.workspaceId,l.target.value);console.log(n)}catch(n){this.publicFunctions.catchError(n)}}))}searchWorkspaceMembers(l,n){return u.__awaiter(this,void 0,void 0,(function*(){try{return new Promise(t=>u.__awaiter(this,void 0,void 0,(function*(){let t=this.injector.get(s.a),u=yield t.searchWorkspaceMembers(l,n);console.log(u)})))}catch(t){this.publicFunctions.catchError(t)}}))}isGroupMember(l){return u.__awaiter(this,void 0,void 0,(function*(){}))}removeMemberFromMap(l){this.members.length>=0&&this.selectedMembers.size>=0&&(this.members.slice(this.members.findIndex(n=>l._id===n),1),l.showAddMem=!0,this.selectedMembers.delete(l._id),this.memberEmitter.emit(this.selectedMembers))}memberJustAddedToMap(l){return this.selectedMembers.has(l._id)}addToSelectedMember(l){"task"==this.type&&(this.itemList.forEach(l=>{l.showAddMem=!0}),this.members=[]),l.showAddMem=!1,this.members.push(l),this.selectedMembers=new Map(this.members.map(l=>[l._id,l])),this.memberEmitter.emit(this.selectedMembers)}onAddNewMember(l){l.showAddMem=!1,this.memberEmitter.emit(l)}searchSkills(l){return u.__awaiter(this,void 0,void 0,(function*(){return new Promise((n,t)=>{this.injector.get(p.a).searchSkills(l).then(l=>{n(l.skills.map(l=>l.skills))}).catch(()=>{t([])})})}))}onAddSkill(l){return u.__awaiter(this,void 0,void 0,(function*(){this.skillEmitter.emit(l),this.userData.skills.push(l),this.itemList=[],this.itemValue=""}))}hasSkill(l){return!!this.userData.skills.includes(l)}ngOnDestroy(){this.subSink.unsubscribe()}}}}]);