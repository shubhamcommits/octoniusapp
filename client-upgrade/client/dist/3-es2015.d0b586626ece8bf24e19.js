(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"3zBX":function(l,n,t){"use strict";var e=t("8Y7J");t("E61X"),t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return u}));var i=e.qb({encapsulation:0,styles:[[""]],data:{}});function u(l){return e.Ob(0,[e.Kb(402653184,1,{anchor:0}),e.Db(null,0),(l()(),e.sb(2,0,[[1,0],["anchor",1]],null,0,"div",[],null,null,null,null,null))],null,null)}},"4H+H":function(l,n,t){"use strict";var e=t("8Y7J");t("N5E8"),t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return u}));var i=e.qb({encapsulation:0,styles:[['.separator[_ngcontent-%COMP%]{display:flex;align-items:center;color:grey;font-weight:bolder;font-size:14px;text-align:center;margin-bottom:2%}.separator[_ngcontent-%COMP%]::after, .separator[_ngcontent-%COMP%]::before{content:"";flex:1;border-bottom:2px solid grey}.separator[_ngcontent-%COMP%]::before{margin-right:.25em}.separator[_ngcontent-%COMP%]::after{margin-left:.25em}']],data:{}});function u(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,0,"div",[["class","separator"]],null,null,null,null,null))],null,null)}},E61X:function(l,n,t){"use strict";t.d(n,"a",(function(){return i}));var e=t("8Y7J");class i{constructor(l){this.host=l,this.options={},this.scrolled=new e.m}ngOnInit(){let l=Object.assign({root:this.isHostScrollable()?this.host.nativeElement:null},this.options);this.observer=new IntersectionObserver(([l])=>{l.isIntersecting&&this.scrolled.emit()},l),this.observer.observe(this.anchor.nativeElement)}get element(){return this.host.nativeElement}isHostScrollable(){const l=window.getComputedStyle(this.element);return"auto"===l.getPropertyValue("overflow")||"scroll"===l.getPropertyValue("overflow-y")}ngOnDestroy(){this.observer.disconnect()}}},N5E8:function(l,n,t){"use strict";t.d(n,"a",(function(){return e}));class e{constructor(){}ngOnInit(){}}},Tdi4:function(l,n,t){"use strict";var e=t("8Y7J"),i=t("SVse"),u=t("iInd"),r=t("vdBU"),s=t("78I+"),o=t("4H+H"),a=t("N5E8"),c=t("s7LF"),p=t("3zBX"),h=t("E61X");t("nQ18"),t("23FM"),t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return _}));var d=e.qb({encapsulation:0,styles:[[".search[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex}.searchTerm[_ngcontent-%COMP%]{width:100%;border:3px solid #e4edf8;border-right:none;padding:5px;height:100%;border-radius:5px 0 0 5px;outline:0;color:#9dbfaf}.searchTerm[_ngcontent-%COMP%]:focus{color:#005fd5;border:3px solid #005fd5}.searchButton[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border:1px solid #005fd5;background:#005fd5;text-align:center;color:#fff;border-radius:0 5px 5px 0;cursor:pointer;font-size:20px}.wrap[_ngcontent-%COMP%]{width:30%}app-loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}img[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease}img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}"]],data:{}});function b(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"li",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.changeRole(l.parent.parent.context.$implicit._id,"admin",l.parent.parent.context.index)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Change to Admin"]))],null,null)}function m(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"li",[["class","dropdown-item"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.changeRole(l.parent.parent.context.$implicit._id,"member",l.parent.parent.context.index)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Change to Member"]))],null,null)}function g(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,11,"div",[["class","dropdown"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"button",[["class","btn btn-primary btn-sm dropdown-toggle"],["data-toggle","dropdown"],["type","button"]],null,null,null,null,null)),(l()(),e.Mb(2,null,["Manage "," "])),(l()(),e.sb(3,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,7,"ul",[["class","dropdown-menu"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,b)),e.rb(6,16384,null,0,i.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,m)),e.rb(8,16384,null,0,i.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(9,0,null,null,0,"li",[["class","dropdown-divider"]],null,null,null,null,null)),(l()(),e.sb(10,0,null,null,1,"li",[["class","dropdown-item"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Remove from workplace"]))],(function(l,n){l(n,6,0,"admin"!=n.parent.context.$implicit.role),l(n,8,0,"member"!=n.parent.context.$implicit.role)}),(function(l,n){l(n,2,0,null==n.parent.context.$implicit?null:n.parent.context.$implicit.first_name)}))}function f(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"button",[["class","btn btn-danger btn-sm"]],null,[[null,"click"]],(function(l,n,t){var e=!0,i=l.component;return"click"===n&&(e=!1!==i.removeUserFromGroup(i.groupId,l.parent.parent.context.$implicit._id,l.parent.parent.context.index)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Remove Member"]))],null,null)}function y(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"section",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,f)),e.rb(2,16384,null,0,i.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,"Global"!=n.component.groupData.group_name)}),null)}function v(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,17,"div",[["class","media card-tile user-list"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"img",[["class","feed-avatar"],["onerror","this.src='/assets/images/user.png'"],["routerLink","/dashboard/user/profile"]],[[8,"src",4]],[[null,"click"]],(function(l,n,t){var i=!0;return"click"===n&&(i=!1!==e.Eb(l,2).onClick()&&i),i}),null,null)),e.rb(2,16384,null,0,u.p,[u.o,u.a,[8,null],e.C,e.k],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),e.Hb(3,{userId:0}),(l()(),e.sb(4,0,null,null,13,"div",[["class","media-body"]],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,7,"div",[["class","float-left"]],null,null,null,null,null)),(l()(),e.sb(6,0,null,null,1,"p",[["class","mt-0"]],null,null,null,null,null)),(l()(),e.Mb(7,null,[""," ",""])),(l()(),e.sb(8,0,null,null,4,"p",[],null,null,null,null,null)),(l()(),e.Mb(9,null,["Role: "," ("])),(l()(),e.sb(10,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(l()(),e.Mb(11,null,["",""])),(l()(),e.Mb(-1,null,[")"])),(l()(),e.sb(13,0,null,null,4,"div",[["class","btn-group mr-3 float-right"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,g)),e.rb(15,16384,null,0,i.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,y)),e.rb(17,16384,null,0,i.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component,e=l(n,3,0,n.context.$implicit._id);l(n,2,0,e,"/dashboard/user/profile"),l(n,15,0,"owner"!=n.context.$implicit.role&&"workspace"==t.type),l(n,17,0,"group"==t.type)}),(function(l,n){l(n,1,0,e.wb(2,"",n.component.baseUrl,"/uploads/",null==n.context.$implicit?null:n.context.$implicit.profile_pic,"")),l(n,7,0,null==n.context.$implicit?null:n.context.$implicit.first_name,null==n.context.$implicit?null:n.context.$implicit.last_name),l(n,9,0,null==n.context.$implicit?null:n.context.$implicit.role),l(n,10,0,e.wb(1,"mailto:",null==n.context.$implicit?null:n.context.$implicit.email,"")),l(n,11,0,null==n.context.$implicit?null:n.context.$implicit.email)}))}function w(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"app-loading-spinner",[],null,null,null,r.b,r.a)),e.rb(2,114688,null,0,s.a,[],null,null)],(function(l,n){l(n,2,0)}),null)}function x(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"app-section-separator",[],null,null,null,o.b,o.a)),e.rb(1,114688,null,0,a.a,[],null,null)],(function(l,n){l(n,1,0)}),null)}function _(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,9,"div",[["class","search"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,5,"input",[["class","searchTerm"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,t){var i=!0,u=l.component;return"input"===n&&(i=!1!==e.Eb(l,2)._handleInput(t.target.value)&&i),"blur"===n&&(i=!1!==e.Eb(l,2).onTouched()&&i),"compositionstart"===n&&(i=!1!==e.Eb(l,2)._compositionStart()&&i),"compositionend"===n&&(i=!1!==e.Eb(l,2)._compositionEnd(t.target.value)&&i),"keyup"===n&&(i=!1!==u.userSearchQuery(u.query)&&i),"ngModelChange"===n&&(i=!1!==(u.query=t)&&i),i}),null,null)),e.rb(2,16384,null,0,c.b,[e.C,e.k,[2,c.a]],null,null),e.Jb(1024,null,c.e,(function(l){return[l]}),[c.b]),e.rb(4,671744,null,0,c.h,[[8,null],[8,null],[8,null],[6,c.e]],{model:[0,"model"]},{update:"ngModelChange"}),e.Jb(2048,null,c.f,null,[c.h]),e.rb(6,16384,null,0,c.g,[[4,c.f]],null,null),(l()(),e.sb(7,0,null,null,2,"button",[["class","searchButton"],["type","submit"]],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" search "])),(l()(),e.sb(10,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(11,0,null,null,3,"app-infinite-scroll",[],null,[[null,"scrolled"]],(function(l,n,t){var e=!0;return"scrolled"===n&&(e=!1!==l.component.onScroll()&&e),e}),p.b,p.a)),e.rb(12,245760,null,0,h.a,[e.k],null,{scrolled:"scrolled"}),(l()(),e.hb(16777216,null,0,1,null,v)),e.rb(14,278528,null,0,i.o,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),e.hb(16777216,null,null,2,null,w)),e.rb(16,16384,null,0,i.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e.Gb(131072,i.b,[e.h]),(l()(),e.hb(16777216,null,null,1,null,x)),e.rb(19,16384,null,0,i.p,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,4,0,t.query),l(n,12,0),l(n,14,0,t.members,t.utilityService.trackByIndex),l(n,16,0,e.Nb(n,16,0,e.Eb(n,17).transform(t.isLoading$))),l(n,19,0,!t.moreToLoad)}),(function(l,n){l(n,1,0,n.component.placeholder,e.Eb(n,6).ngClassUntouched,e.Eb(n,6).ngClassTouched,e.Eb(n,6).ngClassPristine,e.Eb(n,6).ngClassDirty,e.Eb(n,6).ngClassValid,e.Eb(n,6).ngClassInvalid,e.Eb(n,6).ngClassPending)}))}},nQ18:function(l,n,t){"use strict";t.d(n,"a",(function(){return m}));var e=t("mrSG"),i=t("SFZf"),u=t("7RJT"),r=t("4Uf4"),s=t("23FM"),o=t("GED1"),a=t("AytR"),c=t("ds6q"),p=t("dMDw"),h=t("B/hR"),d=t("iq5f"),b=t("9jdi");class m{constructor(l,n){this.injector=l,this.utilityService=n,this.placeholder="",this.groupData={},this.userData={},this.workspaceData={},this.members=[],this.baseUrl=a.a.UTILITIES_BASE_URL,this.publicFunctions=new i.a(this.injector),this.moreToLoad=!0,this.lastUserId="",this.isLoading$=new u.BehaviorSubject(!1),this.query="",this.queryChanged=new c.Subject,this.subSink=new d.SubSink}ngOnInit(){this.lastUserId=this.members[this.members.length-1]._id}queryChange(l){this.queryChanged.next(l)}ngAfterViewInit(){this.subSink.add(this.queryChanged.pipe(Object(p.debounceTime)(500),Object(h.distinctUntilChanged)()).subscribe(()=>e.__awaiter(this,void 0,void 0,(function*(){let l=[];"workspace"!==this.type&&"group"!==this.type||(""==this.query?("workspace"===this.type&&(this.members=this.workspaceData.members),"group"===this.type&&(Array.prototype.push.apply(this.groupData._members,this.groupData._admins),this.members=Array.from(new Set(this.groupData._members))),this.moreToLoad=!0,this.lastUserId=this.members[this.members.length-1]._id):("workspace"===this.type&&(l=(yield this.publicFunctions.searchWorkspaceMembers(this.workspaceId,this.query))||[]),"group"===this.type&&(l=(yield this.publicFunctions.searchGroupMembers(this.groupId,this.query))||[]),this.members=l.users)),this.isLoading$.next(!1)}))))}removeUserFromGroup(l,n,t){let e=this.injector.get(b.a);this.utilityService.getConfirmDialogAlert().then(i=>{i.value&&this.utilityService.asyncNotification("Please wait while we are removing the user ...",new Promise((i,u)=>{e.removeUser(l,n).then(()=>{let l=this.members[t];this.groupData._members.splice(this.groupData._members.findIndex(n=>n._id===l._id),1),this.groupData._admins.splice(this.groupData._admins.findIndex(n=>n._id===l._id),1),this.members.splice(t,1),this.publicFunctions.sendUpdatesToGroupData(this.groupData),i(this.utilityService.resolveAsyncPromise("User removed!"))}).catch(()=>u(this.utilityService.rejectAsyncPromise("Unable to remove the user from the group, please try again!")))}))})}userSearchQuery(l){try{this.isLoading$.next(!0),this.queryChange(l)}catch(n){this.publicFunctions.catchError(n)}}changeRole(l,n,t){return e.__awaiter(this,void 0,void 0,(function*(){let e=this.injector.get(r.a),i=this.injector.get(s.a),u=this.injector.get(o.a);i.asyncNotification("Please wait we are updating the role as per your request...",new Promise((r,s)=>{e.updateUserRole(l,n).then(l=>{this.members[t].role=n,this.workspaceData.members=this.members,this.publicFunctions.sendUpdatesToWorkspaceData(this.workspaceData),this.publicFunctions.emitWorkspaceData(u,this.workspaceData),this.publicFunctions.emitUserData(u,this.members[t]._id,this.members[t]),r(i.resolveAsyncPromise(`User updated to ${n}!`))}).catch(l=>{console.log("Error occured, while updating the role",l),s(i.rejectAsyncPromise("Oops, an error occured while updating the role, please try again!"))})}))}))}onScroll(){return e.__awaiter(this,void 0,void 0,(function*(){this.moreToLoad&&(this.isLoading$.next(!0),yield this.scrolled())}))}scrolled(){return e.__awaiter(this,void 0,void 0,(function*(){if(this.members&&this.lastUserId&&""!=this.lastUserId&&null!=this.lastUserId){let l=[];"workspace"===this.type&&(l=yield this.publicFunctions.getNextWorkspaceMembers(this.workspaceData._id,this.lastUserId,this.query)),"group"===this.type&&(l=yield this.publicFunctions.getNextGroupMembers(this.groupId,this.lastUserId,this.query)),0==l.length&&(this.moreToLoad=!1),this.moreToLoad&&(this.members=[...this.members,...l],this.utilityService.removeDuplicates(this.members,"_id").then(l=>{this.members=l}),this.lastUserId=this.members[this.members.length-1]._id)}this.isLoading$.next(!1)}))}ngOnDestroy(){this.subSink.unsubscribe()}}}}]);